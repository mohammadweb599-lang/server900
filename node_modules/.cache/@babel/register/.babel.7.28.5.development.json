{"{\"assumptions\":{},\"sourceRoot\":\"/Users/trzp/Desktop/FootBallWeb/server/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/trzp/Desktop/FootBallWeb/server\",\"filename\":\"/Users/trzp/Desktop/FootBallWeb/server/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/trzp/Desktop/FootBallWeb/server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.28.5:development":{"value":{"code":"require('dotenv').config();\nconst express = require('express');\nconst http = require('http');\nconst {\n  Server\n} = require('socket.io');\nconst cors = require('cors');\nconst helmet = require('helmet');\nconst compression = require('compression');\nconst path = require('path');\nconst {\n  Database\n} = require('./config/db');\nconst {\n  MatchSocket\n} = require('./sockets/MatchSocket');\n\n// Import jobs\nrequire('./jobs/CoinProductionJob');\nrequire('./jobs/DailyJobs');\nrequire('./jobs/LeagueJob');\n\n// Import routes\nconst facilityRoutes = require('./routes/facilities');\nconst youthCampRoutes = require('./routes/youthCamp');\nconst authRoutes = require('./routes/auth');\nconst uploadRoutes = require('./routes/upload');\nconst app = express();\nconst server = http.createServer(app);\nconst io = new Server(server, {\n  cors: {\n    origin: process.env.CLIENT_URL || \"http://localhost:3000\",\n    methods: [\"GET\", \"POST\"]\n  }\n});\n\n// ŸÖ€åÿØŸÑŸàÿ±Ÿáÿß€å Ÿæÿß€åŸá\napp.use(helmet());\napp.use(compression());\napp.use(cors());\napp.use(express.json());\napp.use(express.urlencoded({\n  extended: true\n}));\n\n// ÿ≥ÿ±Ÿà ⁄©ÿ±ÿØŸÜ ŸÅÿß€åŸÑ‚ÄåŸáÿß€å ÿßÿ≥ÿ™ÿßÿ™€å⁄© (uploads)\napp.use('/uploads', express.static(path.join(__dirname, 'uploads')));\n\n// Route ÿ≥ŸÑÿßŸÖÿ™ - ÿ®ÿß€åÿØ ŸÇÿ®ŸÑ ÿßÿ≤ routes ÿØ€å⁄Øÿ± ÿ®ÿßÿ¥ÿØ\napp.get('/health', (req, res) => {\n  res.json({\n    status: 'OK',\n    timestamp: new Date().toISOString(),\n    environment: process.env.NODE_ENV || 'development'\n  });\n});\n\n// API routes - ÿ®ÿß€åÿØ ŸÇÿ®ŸÑ ÿßÿ≤ static files ÿ®ÿßÿ¥ŸÜÿØ\napp.use('/api/facilities', facilityRoutes);\napp.use('/api/youth-camp', youthCampRoutes);\napp.use('/api/auth', authRoutes);\napp.use('/api/upload', uploadRoutes);\n\n// ÿ≥ÿ±Ÿà ⁄©ÿ±ÿØŸÜ ŸÅÿß€åŸÑ‚ÄåŸáÿß€å ÿßÿ≥ÿ™ÿßÿ™€å⁄© React (build ÿ¥ÿØŸá)\nconst clientBuildPath = path.join(__dirname, '../client/build');\napp.use(express.static(clientBuildPath));\n\n// ÿ®ÿ±ÿß€å SPA routing - ŸáŸÖŸá route Ÿáÿß€å ÿ∫€åÿ± API ÿ±ÿß ÿ®Ÿá index.html ŸáÿØÿß€åÿ™ ŸÖ€å‚Äå⁄©ŸÜÿØ\napp.get('*', (req, res) => {\n  // ÿß⁄Øÿ± route ÿ®ÿß /api ÿ¥ÿ±Ÿàÿπ ŸÖ€å‚Äåÿ¥ŸàÿØÿå 404 ÿ®ÿ±⁄Øÿ±ÿØÿßŸÜ\n  if (req.path.startsWith('/api')) {\n    return res.status(404).json({\n      success: false,\n      message: 'Route €åÿßŸÅÿ™ ŸÜÿ¥ÿØ'\n    });\n  }\n  // ÿØÿ± ÿ∫€åÿ± ÿß€åŸÜ ÿµŸàÿ±ÿ™ index.html ÿ±ÿß ÿ®ÿ±⁄Øÿ±ÿØÿßŸÜ (ÿ®ÿ±ÿß€å React Router)\n  res.sendFile(path.join(clientBuildPath, 'index.html'));\n});\n\n// ŸÖÿØ€åÿ±€åÿ™ ÿÆÿ∑ÿß - ÿ®ÿß€åÿØ ÿØÿ± ÿßŸÜÿ™Ÿáÿß ÿ®ÿßÿ¥ÿØ\napp.use((err, req, res, next) => {\n  console.error('Error:', err);\n  res.status(500).json({\n    success: false,\n    message: 'ÿÆÿ∑ÿß€å ÿ≥ÿ±Ÿàÿ± ÿØÿßÿÆŸÑ€å'\n  });\n});\n\n// ÿ±ÿßŸá‚ÄåÿßŸÜÿØÿßÿ≤€å ÿØ€åÿ™ÿßÿ®€åÿ≥ Ÿà ÿ≥ÿ±Ÿàÿ±\nDatabase.connect().then(() => {\n  // ÿ±ÿßŸá‚ÄåÿßŸÜÿØÿßÿ≤€å Socket.io\n  MatchSocket.initialize(io);\n  const PORT = process.env.PORT || 5000;\n  server.listen(PORT, () => {\n    console.log(`üöÄ Server running on port ${PORT}`);\n    console.log(`üìç Environment: ${process.env.NODE_ENV || 'development'}`);\n  });\n}).catch(error => {\n  console.error('Failed to start server:', error);\n  process.exit(1);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiZXhwcmVzcyIsImh0dHAiLCJTZXJ2ZXIiLCJjb3JzIiwiaGVsbWV0IiwiY29tcHJlc3Npb24iLCJwYXRoIiwiRGF0YWJhc2UiLCJNYXRjaFNvY2tldCIsImZhY2lsaXR5Um91dGVzIiwieW91dGhDYW1wUm91dGVzIiwiYXV0aFJvdXRlcyIsInVwbG9hZFJvdXRlcyIsImFwcCIsInNlcnZlciIsImNyZWF0ZVNlcnZlciIsImlvIiwib3JpZ2luIiwicHJvY2VzcyIsImVudiIsIkNMSUVOVF9VUkwiLCJtZXRob2RzIiwidXNlIiwianNvbiIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsInN0YXRpYyIsImpvaW4iLCJfX2Rpcm5hbWUiLCJnZXQiLCJyZXEiLCJyZXMiLCJzdGF0dXMiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJlbnZpcm9ubWVudCIsIk5PREVfRU5WIiwiY2xpZW50QnVpbGRQYXRoIiwic3RhcnRzV2l0aCIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwic2VuZEZpbGUiLCJlcnIiLCJuZXh0IiwiY29uc29sZSIsImVycm9yIiwiY29ubmVjdCIsInRoZW4iLCJpbml0aWFsaXplIiwiUE9SVCIsImxpc3RlbiIsImxvZyIsImNhdGNoIiwiZXhpdCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3RyenAvRGVza3RvcC9Gb290QmFsbFdlYi9zZXJ2ZXIvIiwic291cmNlcyI6WyJhcHAuanMiXSwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7XG5jb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKTtcbmNvbnN0IHsgU2VydmVyIH0gPSByZXF1aXJlKCdzb2NrZXQuaW8nKTtcbmNvbnN0IGNvcnMgPSByZXF1aXJlKCdjb3JzJyk7XG5jb25zdCBoZWxtZXQgPSByZXF1aXJlKCdoZWxtZXQnKTtcbmNvbnN0IGNvbXByZXNzaW9uID0gcmVxdWlyZSgnY29tcHJlc3Npb24nKTtcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5jb25zdCB7IERhdGFiYXNlIH0gPSByZXF1aXJlKCcuL2NvbmZpZy9kYicpO1xuY29uc3QgeyBNYXRjaFNvY2tldCB9ID0gcmVxdWlyZSgnLi9zb2NrZXRzL01hdGNoU29ja2V0Jyk7XG5cbi8vIEltcG9ydCBqb2JzXG5yZXF1aXJlKCcuL2pvYnMvQ29pblByb2R1Y3Rpb25Kb2InKTtcbnJlcXVpcmUoJy4vam9icy9EYWlseUpvYnMnKTtcbnJlcXVpcmUoJy4vam9icy9MZWFndWVKb2InKTtcblxuLy8gSW1wb3J0IHJvdXRlc1xuY29uc3QgZmFjaWxpdHlSb3V0ZXMgPSByZXF1aXJlKCcuL3JvdXRlcy9mYWNpbGl0aWVzJyk7XG5jb25zdCB5b3V0aENhbXBSb3V0ZXMgPSByZXF1aXJlKCcuL3JvdXRlcy95b3V0aENhbXAnKTtcbmNvbnN0IGF1dGhSb3V0ZXMgPSByZXF1aXJlKCcuL3JvdXRlcy9hdXRoJyk7XG5jb25zdCB1cGxvYWRSb3V0ZXMgPSByZXF1aXJlKCcuL3JvdXRlcy91cGxvYWQnKTtcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuY29uc3Qgc2VydmVyID0gaHR0cC5jcmVhdGVTZXJ2ZXIoYXBwKTtcbmNvbnN0IGlvID0gbmV3IFNlcnZlcihzZXJ2ZXIsIHtcbiAgY29yczoge1xuICAgIG9yaWdpbjogcHJvY2Vzcy5lbnYuQ0xJRU5UX1VSTCB8fCBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMFwiLFxuICAgIG1ldGhvZHM6IFtcIkdFVFwiLCBcIlBPU1RcIl1cbiAgfVxufSk7XG5cbi8vINmF24zYr9mE2YjYsdmH2KfbjCDZvtin24zZh1xuYXBwLnVzZShoZWxtZXQoKSk7XG5hcHAudXNlKGNvbXByZXNzaW9uKCkpO1xuYXBwLnVzZShjb3JzKCkpO1xuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG5hcHAudXNlKGV4cHJlc3MudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcblxuLy8g2LPYsdmIINqp2LHYr9mGINmB2KfbjNmE4oCM2YfYp9uMINin2LPYqtin2KrbjNqpICh1cGxvYWRzKVxuYXBwLnVzZSgnL3VwbG9hZHMnLCBleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAndXBsb2FkcycpKSk7XG5cbi8vIFJvdXRlINiz2YTYp9mF2KogLSDYqNin24zYryDZgtio2YQg2KfYsiByb3V0ZXMg2K/bjNqv2LEg2KjYp9i02K9cbmFwcC5nZXQoJy9oZWFsdGgnLCAocmVxLCByZXMpID0+IHtcbiAgcmVzLmpzb24oeyBcbiAgICBzdGF0dXM6ICdPSycsIFxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIGVudmlyb25tZW50OiBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCAnZGV2ZWxvcG1lbnQnXG4gIH0pO1xufSk7XG5cbi8vIEFQSSByb3V0ZXMgLSDYqNin24zYryDZgtio2YQg2KfYsiBzdGF0aWMgZmlsZXMg2KjYp9i02YbYr1xuYXBwLnVzZSgnL2FwaS9mYWNpbGl0aWVzJywgZmFjaWxpdHlSb3V0ZXMpO1xuYXBwLnVzZSgnL2FwaS95b3V0aC1jYW1wJywgeW91dGhDYW1wUm91dGVzKTtcbmFwcC51c2UoJy9hcGkvYXV0aCcsIGF1dGhSb3V0ZXMpO1xuYXBwLnVzZSgnL2FwaS91cGxvYWQnLCB1cGxvYWRSb3V0ZXMpO1xuXG4vLyDYs9ix2Ygg2qnYsdiv2YYg2YHYp9uM2YTigIzZh9in24wg2KfYs9iq2KfYqtuM2qkgUmVhY3QgKGJ1aWxkINi02K/ZhylcbmNvbnN0IGNsaWVudEJ1aWxkUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsICcuLi9jbGllbnQvYnVpbGQnKTtcbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMoY2xpZW50QnVpbGRQYXRoKSk7XG5cbi8vINio2LHYp9uMIFNQQSByb3V0aW5nIC0g2YfZhdmHIHJvdXRlINmH2KfbjCDYutuM2LEgQVBJINix2Kcg2KjZhyBpbmRleC5odG1sINmH2K/Yp9uM2Kog2YXbjOKAjNqp2YbYr1xuYXBwLmdldCgnKicsIChyZXEsIHJlcykgPT4ge1xuICAvLyDYp9qv2LEgcm91dGUg2KjYpyAvYXBpINi02LHZiNi5INmF24zigIzYtNmI2K/YjCA0MDQg2KjYsdqv2LHYr9in2YZcbiAgaWYgKHJlcS5wYXRoLnN0YXJ0c1dpdGgoJy9hcGknKSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IFxuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiAnUm91dGUg24zYp9mB2Kog2YbYtNivJyBcbiAgICB9KTtcbiAgfVxuICAvLyDYr9ixINi624zYsSDYp9uM2YYg2LXZiNix2KogaW5kZXguaHRtbCDYsdinINio2LHar9ix2K/Yp9mGICjYqNix2KfbjCBSZWFjdCBSb3V0ZXIpXG4gIHJlcy5zZW5kRmlsZShwYXRoLmpvaW4oY2xpZW50QnVpbGRQYXRoLCAnaW5kZXguaHRtbCcpKTtcbn0pO1xuXG4vLyDZhdiv24zYsduM2Kog2K7Yt9inIC0g2KjYp9uM2K8g2K/YsSDYp9mG2KrZh9inINio2KfYtNivXG5hcHAudXNlKChlcnIsIHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnNvbGUuZXJyb3IoJ0Vycm9yOicsIGVycik7XG4gIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXG4gICAgc3VjY2VzczogZmFsc2UsXG4gICAgbWVzc2FnZTogJ9iu2LfYp9uMINiz2LHZiNixINiv2KfYrtmE24wnIFxuICB9KTtcbn0pO1xuXG4vLyDYsdin2YfigIzYp9mG2K/Yp9iy24wg2K/bjNiq2KfYqNuM2LMg2Ygg2LPYsdmI2LFcbkRhdGFiYXNlLmNvbm5lY3QoKS50aGVuKCgpID0+IHtcbiAgLy8g2LHYp9mH4oCM2KfZhtiv2KfYstuMIFNvY2tldC5pb1xuICBNYXRjaFNvY2tldC5pbml0aWFsaXplKGlvKTtcblxuICBjb25zdCBQT1JUID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCA1MDAwO1xuXG4gIHNlcnZlci5saXN0ZW4oUE9SVCwgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKGDwn5qAIFNlcnZlciBydW5uaW5nIG9uIHBvcnQgJHtQT1JUfWApO1xuICAgIGNvbnNvbGUubG9nKGDwn5ONIEVudmlyb25tZW50OiAke3Byb2Nlc3MuZW52Lk5PREVfRU5WIHx8ICdkZXZlbG9wbWVudCd9YCk7XG4gIH0pO1xufSkuY2F0Y2goZXJyb3IgPT4ge1xuICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc3RhcnQgc2VydmVyOicsIGVycm9yKTtcbiAgcHJvY2Vzcy5leGl0KDEpO1xufSk7Il0sIm1hcHBpbmdzIjoiQUFBQUEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDQyxNQUFNLENBQUMsQ0FBQztBQUMxQixNQUFNQyxPQUFPLEdBQUdGLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUcsSUFBSSxHQUFHSCxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzVCLE1BQU07RUFBRUk7QUFBTyxDQUFDLEdBQUdKLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDdkMsTUFBTUssSUFBSSxHQUFHTCxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzVCLE1BQU1NLE1BQU0sR0FBR04sT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUNoQyxNQUFNTyxXQUFXLEdBQUdQLE9BQU8sQ0FBQyxhQUFhLENBQUM7QUFDMUMsTUFBTVEsSUFBSSxHQUFHUixPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzVCLE1BQU07RUFBRVM7QUFBUyxDQUFDLEdBQUdULE9BQU8sQ0FBQyxhQUFhLENBQUM7QUFDM0MsTUFBTTtFQUFFVTtBQUFZLENBQUMsR0FBR1YsT0FBTyxDQUFDLHVCQUF1QixDQUFDOztBQUV4RDtBQUNBQSxPQUFPLENBQUMsMEJBQTBCLENBQUM7QUFDbkNBLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQztBQUMzQkEsT0FBTyxDQUFDLGtCQUFrQixDQUFDOztBQUUzQjtBQUNBLE1BQU1XLGNBQWMsR0FBR1gsT0FBTyxDQUFDLHFCQUFxQixDQUFDO0FBQ3JELE1BQU1ZLGVBQWUsR0FBR1osT0FBTyxDQUFDLG9CQUFvQixDQUFD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","map":{"version":3,"names":["require","config","express","http","Server","cors","helmet","compression","path","Database","MatchSocket","facilityRoutes","youthCampRoutes","authRoutes","uploadRoutes","app","server","createServer","io","origin","process","env","CLIENT_URL","methods","use","json","urlencoded","extended","static","join","__dirname","get","req","res","status","timestamp","Date","toISOString","environment","NODE_ENV","clientBuildPath","startsWith","success","message","sendFile","err","next","console","error","connect","then","initialize","PORT","listen","log","catch","exit"],"sourceRoot":"/Users/trzp/Desktop/FootBallWeb/server/","sources":["app.js"],"sourcesContent":["require('dotenv').config();\nconst express = require('express');\nconst http = require('http');\nconst { Server } = require('socket.io');\nconst cors = require('cors');\nconst helmet = require('helmet');\nconst compression = require('compression');\nconst path = require('path');\nconst { Database } = require('./config/db');\nconst { MatchSocket } = require('./sockets/MatchSocket');\n\n// Import jobs\nrequire('./jobs/CoinProductionJob');\nrequire('./jobs/DailyJobs');\nrequire('./jobs/LeagueJob');\n\n// Import routes\nconst facilityRoutes = require('./routes/facilities');\nconst youthCampRoutes = require('./routes/youthCamp');\nconst authRoutes = require('./routes/auth');\nconst uploadRoutes = require('./routes/upload');\n\nconst app = express();\nconst server = http.createServer(app);\nconst io = new Server(server, {\n  cors: {\n    origin: process.env.CLIENT_URL || \"http://localhost:3000\",\n    methods: [\"GET\", \"POST\"]\n  }\n});\n\n// ŸÖ€åÿØŸÑŸàÿ±Ÿáÿß€å Ÿæÿß€åŸá\napp.use(helmet());\napp.use(compression());\napp.use(cors());\napp.use(express.json());\napp.use(express.urlencoded({ extended: true }));\n\n// ÿ≥ÿ±Ÿà ⁄©ÿ±ÿØŸÜ ŸÅÿß€åŸÑ‚ÄåŸáÿß€å ÿßÿ≥ÿ™ÿßÿ™€å⁄© (uploads)\napp.use('/uploads', express.static(path.join(__dirname, 'uploads')));\n\n// Route ÿ≥ŸÑÿßŸÖÿ™ - ÿ®ÿß€åÿØ ŸÇÿ®ŸÑ ÿßÿ≤ routes ÿØ€å⁄Øÿ± ÿ®ÿßÿ¥ÿØ\napp.get('/health', (req, res) => {\n  res.json({ \n    status: 'OK', \n    timestamp: new Date().toISOString(),\n    environment: process.env.NODE_ENV || 'development'\n  });\n});\n\n// API routes - ÿ®ÿß€åÿØ ŸÇÿ®ŸÑ ÿßÿ≤ static files ÿ®ÿßÿ¥ŸÜÿØ\napp.use('/api/facilities', facilityRoutes);\napp.use('/api/youth-camp', youthCampRoutes);\napp.use('/api/auth', authRoutes);\napp.use('/api/upload', uploadRoutes);\n\n// ÿ≥ÿ±Ÿà ⁄©ÿ±ÿØŸÜ ŸÅÿß€åŸÑ‚ÄåŸáÿß€å ÿßÿ≥ÿ™ÿßÿ™€å⁄© React (build ÿ¥ÿØŸá)\nconst clientBuildPath = path.join(__dirname, '../client/build');\napp.use(express.static(clientBuildPath));\n\n// ÿ®ÿ±ÿß€å SPA routing - ŸáŸÖŸá route Ÿáÿß€å ÿ∫€åÿ± API ÿ±ÿß ÿ®Ÿá index.html ŸáÿØÿß€åÿ™ ŸÖ€å‚Äå⁄©ŸÜÿØ\napp.get('*', (req, res) => {\n  // ÿß⁄Øÿ± route ÿ®ÿß /api ÿ¥ÿ±Ÿàÿπ ŸÖ€å‚Äåÿ¥ŸàÿØÿå 404 ÿ®ÿ±⁄Øÿ±ÿØÿßŸÜ\n  if (req.path.startsWith('/api')) {\n    return res.status(404).json({ \n      success: false,\n      message: 'Route €åÿßŸÅÿ™ ŸÜÿ¥ÿØ' \n    });\n  }\n  // ÿØÿ± ÿ∫€åÿ± ÿß€åŸÜ ÿµŸàÿ±ÿ™ index.html ÿ±ÿß ÿ®ÿ±⁄Øÿ±ÿØÿßŸÜ (ÿ®ÿ±ÿß€å React Router)\n  res.sendFile(path.join(clientBuildPath, 'index.html'));\n});\n\n// ŸÖÿØ€åÿ±€åÿ™ ÿÆÿ∑ÿß - ÿ®ÿß€åÿØ ÿØÿ± ÿßŸÜÿ™Ÿáÿß ÿ®ÿßÿ¥ÿØ\napp.use((err, req, res, next) => {\n  console.error('Error:', err);\n  res.status(500).json({ \n    success: false,\n    message: 'ÿÆÿ∑ÿß€å ÿ≥ÿ±Ÿàÿ± ÿØÿßÿÆŸÑ€å' \n  });\n});\n\n// ÿ±ÿßŸá‚ÄåÿßŸÜÿØÿßÿ≤€å ÿØ€åÿ™ÿßÿ®€åÿ≥ Ÿà ÿ≥ÿ±Ÿàÿ±\nDatabase.connect().then(() => {\n  // ÿ±ÿßŸá‚ÄåÿßŸÜÿØÿßÿ≤€å Socket.io\n  MatchSocket.initialize(io);\n\n  const PORT = process.env.PORT || 5000;\n\n  server.listen(PORT, () => {\n    console.log(`üöÄ Server running on port ${PORT}`);\n    console.log(`üìç Environment: ${process.env.NODE_ENV || 'development'}`);\n  });\n}).catch(error => {\n  console.error('Failed to start server:', error);\n  process.exit(1);\n});"],"mappings":"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","ignoreList":[]}},"mtime":1763908923895},"{\"assumptions\":{},\"sourceRoot\":\"/Users/trzp/Desktop/FootBallWeb/server/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/trzp/Desktop/FootBallWeb/server\",\"filename\":\"/Users/trzp/Desktop/FootBallWeb/server/config/db.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/trzp/Desktop/FootBallWeb/server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.28.5:development":{"value":{"code":"const mongoose = require('mongoose');\nrequire('dotenv').config();\nclass Database {\n  static async connect() {\n    try {\n      const mongoUrl = process.env.MONGO_URL || process.env.MONGODB_URI || 'mongodb://localhost:27017/football-web';\n      console.log('Attempting to connect to MongoDB...');\n      await mongoose.connect(mongoUrl, {\n        useNewUrlParser: true,\n        useUnifiedTopology: true\n      });\n      console.log('‚úÖ MongoDB connected successfully');\n      return mongoose.connection;\n    } catch (err) {\n      console.error('‚ùå MongoDB connection error:', err.message);\n      throw err;\n    }\n  }\n  static async disconnect() {\n    try {\n      await mongoose.disconnect();\n      console.log('MongoDB disconnected');\n    } catch (err) {\n      console.error('MongoDB disconnection error:', err.message);\n    }\n  }\n}\n\n// ÿ®ÿ±ÿß€å ÿ≥ÿßÿ≤⁄Øÿßÿ±€å ÿ®ÿß ⁄©ÿØŸáÿß€å ŸÇÿØ€åŸÖ€å\nconst connectDB = Database.connect;\nmodule.exports = {\n  Database,\n  connectDB\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJjb25maWciLCJEYXRhYmFzZSIsImNvbm5lY3QiLCJtb25nb1VybCIsInByb2Nlc3MiLCJlbnYiLCJNT05HT19VUkwiLCJNT05HT0RCX1VSSSIsImNvbnNvbGUiLCJsb2ciLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJjb25uZWN0aW9uIiwiZXJyIiwiZXJyb3IiLCJtZXNzYWdlIiwiZGlzY29ubmVjdCIsImNvbm5lY3REQiIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy90cnpwL0Rlc2t0b3AvRm9vdEJhbGxXZWIvc2VydmVyL2NvbmZpZy8iLCJzb3VyY2VzIjpbImRiLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcbnJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpO1xuXG5jbGFzcyBEYXRhYmFzZSB7XG4gICAgc3RhdGljIGFzeW5jIGNvbm5lY3QoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBtb25nb1VybCA9IHByb2Nlc3MuZW52Lk1PTkdPX1VSTCB8fCBwcm9jZXNzLmVudi5NT05HT0RCX1VSSSB8fCAnbW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNy9mb290YmFsbC13ZWInO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0F0dGVtcHRpbmcgdG8gY29ubmVjdCB0byBNb25nb0RCLi4uJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QobW9uZ29VcmwsIHtcbiAgICAgICAgICAgICAgICB1c2VOZXdVcmxQYXJzZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgTW9uZ29EQiBjb25uZWN0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgICAgICByZXR1cm4gbW9uZ29vc2UuY29ubmVjdGlvbjtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgTW9uZ29EQiBjb25uZWN0aW9uIGVycm9yOicsIGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBhc3luYyBkaXNjb25uZWN0KCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgbW9uZ29vc2UuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ01vbmdvREIgZGlzY29ubmVjdGVkJyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTW9uZ29EQiBkaXNjb25uZWN0aW9uIGVycm9yOicsIGVyci5tZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8g2KjYsdin24wg2LPYp9iy2q/Yp9ix24wg2KjYpyDaqdiv2YfYp9uMINmC2K/bjNmF24xcbmNvbnN0IGNvbm5lY3REQiA9IERhdGFiYXNlLmNvbm5lY3Q7XG5cbm1vZHVsZS5leHBvcnRzID0geyBEYXRhYmFzZSwgY29ubmVjdERCIH07XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUNwQ0EsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDQyxNQUFNLENBQUMsQ0FBQztBQUUxQixNQUFNQyxRQUFRLENBQUM7RUFDWCxhQUFhQyxPQUFPQSxDQUFBLEVBQUc7SUFDbkIsSUFBSTtNQUNBLE1BQU1DLFFBQVEsR0FBR0MsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFNBQVMsSUFBSUYsT0FBTyxDQUFDQyxHQUFHLENBQUNFLFdBQVcsSUFBSSx3Q0FBd0M7TUFDN0dDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHFDQUFxQyxDQUFDO01BRWxELE1BQU1YLFFBQVEsQ0FBQ0ksT0FBTyxDQUFDQyxRQUFRLEVBQUU7UUFDN0JPLGVBQWUsRUFBRSxJQUFJO1FBQ3JCQyxrQkFBa0IsRUFBRTtNQUN4QixDQUFDLENBQUM7TUFFRkgsT0FBTyxDQUFDQyxHQUFHLENBQUMsa0NBQWtDLENBQUM7TUFDL0MsT0FBT1gsUUFBUSxDQUFDYyxVQUFVO0lBQzlCLENBQUMsQ0FBQyxPQUFPQyxHQUFHLEVBQUU7TUFDVkwsT0FBTyxDQUFDTSxLQUFLLENBQUMsNkJBQTZCLEVBQUVELEdBQUcsQ0FBQ0UsT0FBTyxDQUFDO01BQ3pELE1BQU1GLEdBQUc7SUFDYjtFQUNKO0VBRUEsYUFBYUcsVUFBVUEsQ0FBQSxFQUFHO0lBQ3RCLElBQUk7TUFDQSxNQUFNbEIsUUFBUSxDQUFDa0IsVUFBVSxDQUFDLENBQUM7TUFDM0JSLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHNCQUFzQixDQUFDO0lBQ3ZDLENBQUMsQ0FBQyxPQUFPSSxHQUFHLEVBQUU7TUFDVkwsT0FBTyxDQUFDTSxLQUFLLENBQUMsOEJBQThCLEVBQUVELEdBQUcsQ0FBQ0UsT0FBTyxDQUFDO0lBQzlEO0VBQ0o7QUFDSjs7QUFFQTtBQUNBLE1BQU1FLFNBQVMsR0FBR2hCLFFBQVEsQ0FBQ0MsT0FBTztBQUVsQ2dCLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHO0VBQUVsQixRQUFRO0VBQUVnQjtBQUFVLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["mongoose","require","config","Database","connect","mongoUrl","process","env","MONGO_URL","MONGODB_URI","console","log","useNewUrlParser","useUnifiedTopology","connection","err","error","message","disconnect","connectDB","module","exports"],"sourceRoot":"/Users/trzp/Desktop/FootBallWeb/server/config/","sources":["db.js"],"sourcesContent":["const mongoose = require('mongoose');\nrequire('dotenv').config();\n\nclass Database {\n    static async connect() {\n        try {\n            const mongoUrl = process.env.MONGO_URL || process.env.MONGODB_URI || 'mongodb://localhost:27017/football-web';\n            console.log('Attempting to connect to MongoDB...');\n            \n            await mongoose.connect(mongoUrl, {\n                useNewUrlParser: true,\n                useUnifiedTopology: true,\n            });\n            \n            console.log('‚úÖ MongoDB connected successfully');\n            return mongoose.connection;\n        } catch (err) {\n            console.error('‚ùå MongoDB connection error:', err.message);\n            throw err;\n        }\n    }\n\n    static async disconnect() {\n        try {\n            await mongoose.disconnect();\n            console.log('MongoDB disconnected');\n        } catch (err) {\n            console.error('MongoDB disconnection error:', err.message);\n        }\n    }\n}\n\n// ÿ®ÿ±ÿß€å ÿ≥ÿßÿ≤⁄Øÿßÿ±€å ÿ®ÿß ⁄©ÿØŸáÿß€å ŸÇÿØ€åŸÖ€å\nconst connectDB = Database.connect;\n\nmodule.exports = { Database, connectDB };\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AACpCA,OAAO,CAAC,QAAQ,CAAC,CAACC,MAAM,CAAC,CAAC;AAE1B,MAAMC,QAAQ,CAAC;EACX,aAAaC,OAAOA,CAAA,EAAG;IACnB,IAAI;MACA,MAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,SAAS,IAAIF,OAAO,CAACC,GAAG,CAACE,WAAW,IAAI,wCAAwC;MAC7GC,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC;MAElD,MAAMX,QAAQ,CAACI,OAAO,CAACC,QAAQ,EAAE;QAC7BO,eAAe,EAAE,IAAI;QACrBC,kBAAkB,EAAE;MACxB,CAAC,CAAC;MAEFH,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAC;MAC/C,OAAOX,QAAQ,CAACc,UAAU;IAC9B,CAAC,CAAC,OAAOC,GAAG,EAAE;MACVL,OAAO,CAACM,KAAK,CAAC,6BAA6B,EAAED,GAAG,CAACE,OAAO,CAAC;MACzD,MAAMF,GAAG;IACb;EACJ;EAEA,aAAaG,UAAUA,CAAA,EAAG;IACtB,IAAI;MACA,MAAMlB,QAAQ,CAACkB,UAAU,CAAC,CAAC;MAC3BR,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;IACvC,CAAC,CAAC,OAAOI,GAAG,EAAE;MACVL,OAAO,CAACM,KAAK,CAAC,8BAA8B,EAAED,GAAG,CAACE,OAAO,CAAC;IAC9D;EACJ;AACJ;;AAEA;AACA,MAAME,SAAS,GAAGhB,QAAQ,CAACC,OAAO;AAElCgB,MAAM,CAACC,OAAO,GAAG;EAAElB,QAAQ;EAAEgB;AAAU,CAAC","ignoreList":[]}},"mtime":1763908923673},"{\"assumptions\":{},\"sourceRoot\":\"/Users/trzp/Desktop/FootBallWeb/server/sockets/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/trzp/Desktop/FootBallWeb/server\",\"filename\":\"/Users/trzp/Desktop/FootBallWeb/server/sockets/MatchSocket.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/trzp/Desktop/FootBallWeb/server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.28.5:development":{"value":{"code":"const {\n  MatchService\n} = require('../services/MatchService.js');\nclass MatchSocket {\n  constructor(io) {\n    this.io = io;\n  }\n  initialize() {\n    this.io.on('connection', socket => {\n      console.log('User connected:', socket.id);\n\n      // Join match room\n      socket.on('join_match', data => {\n        const {\n          matchId,\n          userId\n        } = data;\n        socket.join(`match_${matchId}`);\n        console.log(`User ${userId} joined match ${matchId}`);\n      });\n\n      // Leave match room\n      socket.on('leave_match', data => {\n        const {\n          matchId,\n          userId\n        } = data;\n        socket.leave(`match_${matchId}`);\n        console.log(`User ${userId} left match ${matchId}`);\n      });\n\n      // Match action\n      socket.on('match_action', async data => {\n        try {\n          const {\n            matchId,\n            action,\n            userId\n          } = data;\n          // ÿß⁄Øÿ± MatchService.handleAction Ÿàÿ¨ŸàÿØ ÿØÿßÿ±ÿØÿå ÿßÿ≥ÿ™ŸÅÿßÿØŸá ⁄©ŸÜ\n          if (MatchService.handleAction) {\n            const result = await MatchService.handleAction(matchId, action, userId);\n            // Broadcast to all in match room\n            this.io.to(`match_${matchId}`).emit('match_update', result);\n          } else {\n            socket.emit('error', {\n              message: 'Match action not implemented'\n            });\n          }\n        } catch (error) {\n          socket.emit('error', {\n            message: error.message\n          });\n        }\n      });\n      socket.on('disconnect', () => {\n        console.log('User disconnected:', socket.id);\n      });\n    });\n  }\n  static initialize(io) {\n    const matchSocket = new MatchSocket(io);\n    matchSocket.initialize();\n    return matchSocket;\n  }\n}\nmodule.exports = {\n  MatchSocket\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNYXRjaFNlcnZpY2UiLCJyZXF1aXJlIiwiTWF0Y2hTb2NrZXQiLCJjb25zdHJ1Y3RvciIsImlvIiwiaW5pdGlhbGl6ZSIsIm9uIiwic29ja2V0IiwiY29uc29sZSIsImxvZyIsImlkIiwiZGF0YSIsIm1hdGNoSWQiLCJ1c2VySWQiLCJqb2luIiwibGVhdmUiLCJhY3Rpb24iLCJoYW5kbGVBY3Rpb24iLCJyZXN1bHQiLCJ0byIsImVtaXQiLCJtZXNzYWdlIiwiZXJyb3IiLCJtYXRjaFNvY2tldCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy90cnpwL0Rlc2t0b3AvRm9vdEJhbGxXZWIvc2VydmVyL3NvY2tldHMvIiwic291cmNlcyI6WyJNYXRjaFNvY2tldC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IE1hdGNoU2VydmljZSB9ID0gcmVxdWlyZSgnLi4vc2VydmljZXMvTWF0Y2hTZXJ2aWNlLmpzJyk7XG5cbmNsYXNzIE1hdGNoU29ja2V0IHtcbiAgICBjb25zdHJ1Y3Rvcihpbykge1xuICAgICAgICB0aGlzLmlvID0gaW87XG4gICAgfVxuXG4gICAgaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgdGhpcy5pby5vbignY29ubmVjdGlvbicsIChzb2NrZXQpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVc2VyIGNvbm5lY3RlZDonLCBzb2NrZXQuaWQpO1xuXG4gICAgICAgICAgICAvLyBKb2luIG1hdGNoIHJvb21cbiAgICAgICAgICAgIHNvY2tldC5vbignam9pbl9tYXRjaCcsIChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBtYXRjaElkLCB1c2VySWQgfSA9IGRhdGE7XG4gICAgICAgICAgICAgICAgc29ja2V0LmpvaW4oYG1hdGNoXyR7bWF0Y2hJZH1gKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgVXNlciAke3VzZXJJZH0gam9pbmVkIG1hdGNoICR7bWF0Y2hJZH1gKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBMZWF2ZSBtYXRjaCByb29tXG4gICAgICAgICAgICBzb2NrZXQub24oJ2xlYXZlX21hdGNoJywgKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IG1hdGNoSWQsIHVzZXJJZCB9ID0gZGF0YTtcbiAgICAgICAgICAgICAgICBzb2NrZXQubGVhdmUoYG1hdGNoXyR7bWF0Y2hJZH1gKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgVXNlciAke3VzZXJJZH0gbGVmdCBtYXRjaCAke21hdGNoSWR9YCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gTWF0Y2ggYWN0aW9uXG4gICAgICAgICAgICBzb2NrZXQub24oJ21hdGNoX2FjdGlvbicsIGFzeW5jIChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBtYXRjaElkLCBhY3Rpb24sIHVzZXJJZCB9ID0gZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgLy8g2Kfar9ixIE1hdGNoU2VydmljZS5oYW5kbGVBY3Rpb24g2YjYrNmI2K8g2K/Yp9ix2K/YjCDYp9iz2KrZgdin2K/ZhyDaqdmGXG4gICAgICAgICAgICAgICAgICAgIGlmIChNYXRjaFNlcnZpY2UuaGFuZGxlQWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBNYXRjaFNlcnZpY2UuaGFuZGxlQWN0aW9uKG1hdGNoSWQsIGFjdGlvbiwgdXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJyb2FkY2FzdCB0byBhbGwgaW4gbWF0Y2ggcm9vbVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pby50byhgbWF0Y2hfJHttYXRjaElkfWApLmVtaXQoJ21hdGNoX3VwZGF0ZScsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7IG1lc3NhZ2U6ICdNYXRjaCBhY3Rpb24gbm90IGltcGxlbWVudGVkJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgc29ja2V0Lm9uKCdkaXNjb25uZWN0JywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVc2VyIGRpc2Nvbm5lY3RlZDonLCBzb2NrZXQuaWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN0YXRpYyBpbml0aWFsaXplKGlvKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoU29ja2V0ID0gbmV3IE1hdGNoU29ja2V0KGlvKTtcbiAgICAgICAgbWF0Y2hTb2NrZXQuaW5pdGlhbGl6ZSgpO1xuICAgICAgICByZXR1cm4gbWF0Y2hTb2NrZXQ7XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgTWF0Y2hTb2NrZXQgfTsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUE7QUFBYSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyw2QkFBNkIsQ0FBQztBQUUvRCxNQUFNQyxXQUFXLENBQUM7RUFDZEMsV0FBV0EsQ0FBQ0MsRUFBRSxFQUFFO0lBQ1osSUFBSSxDQUFDQSxFQUFFLEdBQUdBLEVBQUU7RUFDaEI7RUFFQUMsVUFBVUEsQ0FBQSxFQUFHO0lBQ1QsSUFBSSxDQUFDRCxFQUFFLENBQUNFLEVBQUUsQ0FBQyxZQUFZLEVBQUdDLE1BQU0sSUFBSztNQUNqQ0MsT0FBTyxDQUFDQyxHQUFHLENBQUMsaUJBQWlCLEVBQUVGLE1BQU0sQ0FBQ0csRUFBRSxDQUFDOztNQUV6QztNQUNBSCxNQUFNLENBQUNELEVBQUUsQ0FBQyxZQUFZLEVBQUdLLElBQUksSUFBSztRQUM5QixNQUFNO1VBQUVDLE9BQU87VUFBRUM7UUFBTyxDQUFDLEdBQUdGLElBQUk7UUFDaENKLE1BQU0sQ0FBQ08sSUFBSSxDQUFDLFNBQVNGLE9BQU8sRUFBRSxDQUFDO1FBQy9CSixPQUFPLENBQUNDLEdBQUcsQ0FBQyxRQUFRSSxNQUFNLGlCQUFpQkQsT0FBTyxFQUFFLENBQUM7TUFDekQsQ0FBQyxDQUFDOztNQUVGO01BQ0FMLE1BQU0sQ0FBQ0QsRUFBRSxDQUFDLGFBQWEsRUFBR0ssSUFBSSxJQUFLO1FBQy9CLE1BQU07VUFBRUMsT0FBTztVQUFFQztRQUFPLENBQUMsR0FBR0YsSUFBSTtRQUNoQ0osTUFBTSxDQUFDUSxLQUFLLENBQUMsU0FBU0gsT0FBTyxFQUFFLENBQUM7UUFDaENKLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLFFBQVFJLE1BQU0sZUFBZUQsT0FBTyxFQUFFLENBQUM7TUFDdkQsQ0FBQyxDQUFDOztNQUVGO01BQ0FMLE1BQU0sQ0FBQ0QsRUFBRSxDQUFDLGNBQWMsRUFBRSxNQUFPSyxJQUFJLElBQUs7UUFDdEMsSUFBSTtVQUNBLE1BQU07WUFBRUMsT0FBTztZQUFFSSxNQUFNO1lBQUVIO1VBQU8sQ0FBQyxHQUFHRixJQUFJO1VBQ3hDO1VBQ0EsSUFBSVgsWUFBWSxDQUFDaUIsWUFBWSxFQUFFO1lBQzNCLE1BQU1DLE1BQU0sR0FBRyxNQUFNbEIsWUFBWSxDQUFDaUIsWUFBWSxDQUFDTCxPQUFPLEVBQUVJLE1BQU0sRUFBRUgsTUFBTSxDQUFDO1lBQ3ZFO1lBQ0EsSUFBSSxDQUFDVCxFQUFFLENBQUNlLEVBQUUsQ0FBQyxTQUFTUCxPQUFPLEVBQUUsQ0FBQyxDQUFDUSxJQUFJLENBQUMsY0FBYyxFQUFFRixNQUFNLENBQUM7VUFDL0QsQ0FBQyxNQUFNO1lBQ0hYLE1BQU0sQ0FBQ2EsSUFBSSxDQUFDLE9BQU8sRUFBRTtjQUFFQyxPQUFPLEVBQUU7WUFBK0IsQ0FBQyxDQUFDO1VBQ3JFO1FBQ0osQ0FBQyxDQUFDLE9BQU9DLEtBQUssRUFBRTtVQUNaZixNQUFNLENBQUNhLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFBRUMsT0FBTyxFQUFFQyxLQUFLLENBQUNEO1VBQVEsQ0FBQyxDQUFDO1FBQ3BEO01BQ0osQ0FBQyxDQUFDO01BRUZkLE1BQU0sQ0FBQ0QsRUFBRSxDQUFDLFlBQVksRUFBRSxNQUFNO1FBQzFCRSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxvQkFBb0IsRUFBRUYsTUFBTSxDQUFDRyxFQUFFLENBQUM7TUFDaEQsQ0FBQyxDQUFDO0lBQ04sQ0FBQyxDQUFDO0VBQ047RUFFQSxPQUFPTCxVQUFVQSxDQUFDRCxFQUFFLEVBQUU7SUFDbEIsTUFBTW1CLFdBQVcsR0FBRyxJQUFJckIsV0FBVyxDQUFDRSxFQUFFLENBQUM7SUFDdkNtQixXQUFXLENBQUNsQixVQUFVLENBQUMsQ0FBQztJQUN4QixPQUFPa0IsV0FBVztFQUN0QjtBQUNKO0FBRUFDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHO0VBQUV2QjtBQUFZLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["MatchService","require","MatchSocket","constructor","io","initialize","on","socket","console","log","id","data","matchId","userId","join","leave","action","handleAction","result","to","emit","message","error","matchSocket","module","exports"],"sourceRoot":"/Users/trzp/Desktop/FootBallWeb/server/sockets/","sources":["MatchSocket.js"],"sourcesContent":["const { MatchService } = require('../services/MatchService.js');\n\nclass MatchSocket {\n    constructor(io) {\n        this.io = io;\n    }\n\n    initialize() {\n        this.io.on('connection', (socket) => {\n            console.log('User connected:', socket.id);\n\n            // Join match room\n            socket.on('join_match', (data) => {\n                const { matchId, userId } = data;\n                socket.join(`match_${matchId}`);\n                console.log(`User ${userId} joined match ${matchId}`);\n            });\n\n            // Leave match room\n            socket.on('leave_match', (data) => {\n                const { matchId, userId } = data;\n                socket.leave(`match_${matchId}`);\n                console.log(`User ${userId} left match ${matchId}`);\n            });\n\n            // Match action\n            socket.on('match_action', async (data) => {\n                try {\n                    const { matchId, action, userId } = data;\n                    // ÿß⁄Øÿ± MatchService.handleAction Ÿàÿ¨ŸàÿØ ÿØÿßÿ±ÿØÿå ÿßÿ≥ÿ™ŸÅÿßÿØŸá ⁄©ŸÜ\n                    if (MatchService.handleAction) {\n                        const result = await MatchService.handleAction(matchId, action, userId);\n                        // Broadcast to all in match room\n                        this.io.to(`match_${matchId}`).emit('match_update', result);\n                    } else {\n                        socket.emit('error', { message: 'Match action not implemented' });\n                    }\n                } catch (error) {\n                    socket.emit('error', { message: error.message });\n                }\n            });\n\n            socket.on('disconnect', () => {\n                console.log('User disconnected:', socket.id);\n            });\n        });\n    }\n\n    static initialize(io) {\n        const matchSocket = new MatchSocket(io);\n        matchSocket.initialize();\n        return matchSocket;\n    }\n}\n\nmodule.exports = { MatchSocket };"],"mappings":"AAAA,MAAM;EAAEA;AAAa,CAAC,GAAGC,OAAO,CAAC,6BAA6B,CAAC;AAE/D,MAAMC,WAAW,CAAC;EACdC,WAAWA,CAACC,EAAE,EAAE;IACZ,IAAI,CAACA,EAAE,GAAGA,EAAE;EAChB;EAEAC,UAAUA,CAAA,EAAG;IACT,IAAI,CAACD,EAAE,CAACE,EAAE,CAAC,YAAY,EAAGC,MAAM,IAAK;MACjCC,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEF,MAAM,CAACG,EAAE,CAAC;;MAEzC;MACAH,MAAM,CAACD,EAAE,CAAC,YAAY,EAAGK,IAAI,IAAK;QAC9B,MAAM;UAAEC,OAAO;UAAEC;QAAO,CAAC,GAAGF,IAAI;QAChCJ,MAAM,CAACO,IAAI,CAAC,SAASF,OAAO,EAAE,CAAC;QAC/BJ,OAAO,CAACC,GAAG,CAAC,QAAQI,MAAM,iBAAiBD,OAAO,EAAE,CAAC;MACzD,CAAC,CAAC;;MAEF;MACAL,MAAM,CAACD,EAAE,CAAC,aAAa,EAAGK,IAAI,IAAK;QAC/B,MAAM;UAAEC,OAAO;UAAEC;QAAO,CAAC,GAAGF,IAAI;QAChCJ,MAAM,CAACQ,KAAK,CAAC,SAASH,OAAO,EAAE,CAAC;QAChCJ,OAAO,CAACC,GAAG,CAAC,QAAQI,MAAM,eAAeD,OAAO,EAAE,CAAC;MACvD,CAAC,CAAC;;MAEF;MACAL,MAAM,CAACD,EAAE,CAAC,cAAc,EAAE,MAAOK,IAAI,IAAK;QACtC,IAAI;UACA,MAAM;YAAEC,OAAO;YAAEI,MAAM;YAAEH;UAAO,CAAC,GAAGF,IAAI;UACxC;UACA,IAAIX,YAAY,CAACiB,YAAY,EAAE;YAC3B,MAAMC,MAAM,GAAG,MAAMlB,YAAY,CAACiB,YAAY,CAACL,OAAO,EAAEI,MAAM,EAAEH,MAAM,CAAC;YACvE;YACA,IAAI,CAACT,EAAE,CAACe,EAAE,CAAC,SAASP,OAAO,EAAE,CAAC,CAACQ,IAAI,CAAC,cAAc,EAAEF,MAAM,CAAC;UAC/D,CAAC,MAAM;YACHX,MAAM,CAACa,IAAI,CAAC,OAAO,EAAE;cAAEC,OAAO,EAAE;YAA+B,CAAC,CAAC;UACrE;QACJ,CAAC,CAAC,OAAOC,KAAK,EAAE;UACZf,MAAM,CAACa,IAAI,CAAC,OAAO,EAAE;YAAEC,OAAO,EAAEC,KAAK,CAACD;UAAQ,CAAC,CAAC;QACpD;MACJ,CAAC,CAAC;MAEFd,MAAM,CAACD,EAAE,CAAC,YAAY,EAAE,MAAM;QAC1BE,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEF,MAAM,CAACG,EAAE,CAAC;MAChD,CAAC,CAAC;IACN,CAAC,CAAC;EACN;EAEA,OAAOL,UAAUA,CAACD,EAAE,EAAE;IAClB,MAAMmB,WAAW,GAAG,IAAIrB,WAAW,CAACE,EAAE,CAAC;IACvCmB,WAAW,CAAClB,UAAU,CAAC,CAAC;IACxB,OAAOkB,WAAW;EACtB;AACJ;AAEAC,MAAM,CAACC,OAAO,GAAG;EAAEvB;AAAY,CAAC","ignoreList":[]}},"mtime":1763908923895},"{\"assumptions\":{},\"sourceRoot\":\"/Users/trzp/Desktop/FootBallWeb/server/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/trzp/Desktop/FootBallWeb/server\",\"filename\":\"/Users/trzp/Desktop/FootBallWeb/server/services/MatchService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/trzp/Desktop/FootBallWeb/server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.28.5:development":{"value":{"code":"const {\n  Match\n} = require('../models/Match.js');\nconst User = require('../models/user.js');\nconst CoinService = require('./CoinService.js');\n\n// redisClient ÿßÿÆÿ™€åÿßÿ±€å ÿßÿ≥ÿ™\nlet redisClient = null;\ntry {\n  const dbConfig = require('../config/database.js');\n  redisClient = dbConfig.redisClient;\n} catch (error) {\n  // Redis ÿßÿÆÿ™€åÿßÿ±€å ÿßÿ≥ÿ™\n}\nclass MatchService {\n  // ÿß€åÿ¨ÿßÿØ ÿ®ÿßÿ≤€å ÿ¨ÿØ€åÿØ\n  static async createMatch(homeTeamId, awayTeamId, league) {\n    const homeTeam = await User.findById(homeTeamId);\n    const awayTeam = await User.findById(awayTeamId);\n    if (!homeTeam || !awayTeam) {\n      throw new Error('ÿ™€åŸÖ‚ÄåŸáÿß €åÿßŸÅÿ™ ŸÜÿ¥ÿØŸÜÿØ');\n    }\n    const match = new Match({\n      homeTeam: homeTeamId,\n      awayTeam: awayTeamId,\n      homeTeamName: homeTeam.teamName,\n      awayTeamName: awayTeam.teamName,\n      stadium: `${homeTeam.teamName} Stadium`,\n      league,\n      startTime: new Date()\n    });\n    await match.save();\n\n    // ÿ¥ÿ±Ÿàÿπ ÿ¥ÿ®€åŸá‚Äåÿ≥ÿßÿ≤€å\n    this.simulateMatch(match._id);\n    return match;\n  }\n\n  // ÿ¥ÿ®€åŸá‚Äåÿ≥ÿßÿ≤€å ÿ®ÿßÿ≤€å\n  static async simulateMatch(matchId) {\n    const match = await Match.findById(matchId);\n    if (!match || match.isFinished) return;\n    const homeTeam = await User.findById(match.homeTeam);\n    const awayTeam = await User.findById(match.awayTeam);\n\n    // ÿ¥ÿ®€åŸá‚Äåÿ≥ÿßÿ≤€å ÿØŸÇ€åŸÇŸá ÿ®Ÿá ÿØŸÇ€åŸÇŸá\n    for (let minute = 1; minute <= 90; minute++) {\n      await this.delay(100); // ÿ™ÿßÿÆ€åÿ± 100ms ÿ®ÿ±ÿß€å Ÿáÿ± ÿØŸÇ€åŸÇŸá\n\n      match.matchTime = minute;\n      await this.simulateMinute(match, homeTeam, awayTeam, minute);\n      await match.save();\n\n      // ÿßÿ±ÿ≥ÿßŸÑ ÿ¢ŸæÿØ€åÿ™ ÿßÿ≤ ÿ∑ÿ±€åŸÇ Socket.io\n      this.emitMatchUpdate(match);\n    }\n\n    // Ÿæÿß€åÿßŸÜ ÿ®ÿßÿ≤€å\n    match.isFinished = true;\n    await match.save();\n\n    // ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ŸÜÿ™ÿß€åÿ¨ Ÿà ÿØÿ±ÿ¢ŸÖÿØ\n    await this.processMatchResult(match, homeTeam, awayTeam);\n  }\n\n  // ÿ¥ÿ®€åŸá‚Äåÿ≥ÿßÿ≤€å €å⁄© ÿØŸÇ€åŸÇŸá ÿßÿ≤ ÿ®ÿßÿ≤€å\n  static async simulateMinute(match, homeTeam, awayTeam, minute) {\n    const homePower = homeTeam.teamPower;\n    const awayPower = awayTeam.teamPower;\n\n    // ÿßÿ≠ÿ™ŸÖÿßŸÑ ŸàŸÇŸàÿπ ÿ±Ÿà€åÿØÿßÿØ ÿØÿ± Ÿáÿ± ÿØŸÇ€åŸÇŸá\n    const eventProbability = 0.15; // 15% chance per minute\n\n    if (Math.random() < eventProbability) {\n      const eventType = this.getRandomEventType();\n      const team = this.getEventTeam(homePower, awayPower);\n      const event = {\n        minute,\n        type: eventType,\n        team,\n        playerName: this.getRandomPlayerName(team === 'home' ? homeTeam : awayTeam),\n        description: this.generateEventDescription(eventType, team, minute)\n      };\n      match.events.push(event);\n\n      // Ÿæÿ±ÿØÿßÿ≤ÿ¥ ÿ±Ÿà€åÿØÿßÿØ\n      await this.processEvent(event, match, homeTeam, awayTeam);\n    }\n  }\n\n  // ÿØÿ±€åÿßŸÅÿ™ ŸÜŸàÿπ ÿ±Ÿà€åÿØÿßÿØ ÿ™ÿµÿßÿØŸÅ€å\n  static getRandomEventType() {\n    const events = [{\n      type: 'goal',\n      weight: 8\n    }, {\n      type: 'yellowCard',\n      weight: 12\n    }, {\n      type: 'redCard',\n      weight: 2\n    }, {\n      type: 'injury',\n      weight: 3\n    }, {\n      type: 'foul',\n      weight: 15\n    }, {\n      type: 'corner',\n      weight: 10\n    }, {\n      type: 'freeKick',\n      weight: 8\n    }, {\n      type: 'penalty',\n      weight: 2\n    }];\n    const totalWeight = events.reduce((sum, event) => sum + event.weight, 0);\n    let random = Math.random() * totalWeight;\n    for (const event of events) {\n      random -= event.weight;\n      if (random <= 0) {\n        return event.type;\n      }\n    }\n    return 'foul';\n  }\n\n  // ÿßŸÜÿ™ÿÆÿßÿ® ÿ™€åŸÖ ÿ®ÿ±ÿß€å ÿ±Ÿà€åÿØÿßÿØ (ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ŸÇÿØÿ±ÿ™)\n  static getEventTeam(homePower, awayPower) {\n    const homeAdvantage = 1.1; // Advantage for home team\n    const totalPower = homePower * homeAdvantage + awayPower;\n    const homeProbability = homePower * homeAdvantage / totalPower;\n    return Math.random() < homeProbability ? 'home' : 'away';\n  }\n\n  // Ÿæÿ±ÿØÿßÿ≤ÿ¥ ÿ±Ÿà€åÿØÿßÿØ\n  static async processEvent(event, match, homeTeam, awayTeam) {\n    const team = event.team === 'home' ? homeTeam : awayTeam;\n    switch (event.type) {\n      case 'goal':\n        if (event.team === 'home') {\n          match.score.home++;\n        } else {\n          match.score.away++;\n        }\n        break;\n      case 'redCard':\n        // ⁄©ÿßŸáÿ¥ ŸÇÿØÿ±ÿ™ ÿ™€åŸÖ ÿ®ÿ±ÿß€å ÿ®ŸÇ€åŸá ÿ®ÿßÿ≤€å\n        await this.applyRedCardEffect(team);\n        break;\n      case 'injury':\n        // ŸÖÿµÿØŸàŸÖ€åÿ™ ÿ®ÿßÿ≤€å⁄©ŸÜ\n        await this.applyInjuryEffect(team);\n        break;\n      case 'penalty':\n        // 80% chance to score penalty\n        if (Math.random() < 0.8) {\n          if (event.team === 'home') {\n            match.score.home++;\n          } else {\n            match.score.away++;\n          }\n        }\n        break;\n    }\n  }\n\n  // ÿßÿπŸÖÿßŸÑ ÿßÿ´ÿ± ⁄©ÿßÿ±ÿ™ ŸÇÿ±ŸÖÿ≤\n  static async applyRedCardEffect(team) {\n    // ⁄©ÿßŸáÿ¥ ŸÇÿØÿ±ÿ™ ÿ™€åŸÖ\n    team.teamPower = Math.max(50, team.teamPower - 5);\n    await team.save();\n  }\n\n  // ÿßÿπŸÖÿßŸÑ ÿßÿ´ÿ± ŸÖÿµÿØŸàŸÖ€åÿ™\n  static async applyInjuryEffect(team) {\n    const randomPlayer = team.players[Math.floor(Math.random() * team.players.length)];\n    if (randomPlayer) {\n      randomPlayer.isInjured = true;\n      randomPlayer.injuryEndTime = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000); // 7 ÿ±Ÿàÿ≤\n      await team.save();\n    }\n  }\n\n  // Ÿæÿ±ÿØÿßÿ≤ÿ¥ ŸÜÿ™€åÿ¨Ÿá ŸÜŸáÿß€å€å ÿ®ÿßÿ≤€å\n  static async processMatchResult(match, homeTeam, awayTeam) {\n    // ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ÿßŸÖÿ™€åÿßÿ≤\n    if (match.score.home > match.score.away) {\n      homeTeam.league.points += 3;\n    } else if (match.score.home < match.score.away) {\n      awayTeam.league.points += 3;\n    } else {\n      homeTeam.league.points += 1;\n      awayTeam.league.points += 1;\n    }\n\n    // ÿ¢ŸæÿØ€åÿ™ ÿ¢ŸÖÿßÿ±\n    homeTeam.league.goalsFor += match.score.home;\n    homeTeam.league.goalsAgainst += match.score.away;\n    homeTeam.league.matchesPlayed += 1;\n    awayTeam.league.goalsFor += match.score.away;\n    awayTeam.league.goalsAgainst += match.score.home;\n    awayTeam.league.matchesPlayed += 1;\n    await homeTeam.save();\n    await awayTeam.save();\n\n    // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ ÿØÿ±ÿ¢ŸÖÿØ ÿßÿ≤ facilities\n    await CoinService.addMatchIncome(homeTeam._id, 'sponsor');\n    await CoinService.addMatchIncome(homeTeam._id, 'stadium');\n    await CoinService.addMatchIncome(homeTeam._id, 'tvRights');\n    await CoinService.addMatchIncome(homeTeam._id, 'youthCamp');\n    await CoinService.addMatchIncome(awayTeam._id, 'sponsor');\n    await CoinService.addMatchIncome(awayTeam._id, 'tvRights');\n    await CoinService.addMatchIncome(awayTeam._id, 'youthCamp');\n  }\n\n  // ÿ™ŸàŸÑ€åÿØ ÿ™Ÿàÿ∂€åÿ≠ ÿ±Ÿà€åÿØÿßÿØ\n  static generateEventDescription(type, team, minute) {\n    const descriptions = {\n      goal: `‚öΩ ⁄ØŸÑ ÿ≤€åÿ®ÿß ÿØÿ± ÿØŸÇ€åŸÇŸá ${minute}!`,\n      yellowCard: `üü® ⁄©ÿßÿ±ÿ™ ÿ≤ÿ±ÿØ ÿØÿ± ÿØŸÇ€åŸÇŸá ${minute}`,\n      redCard: `üü• ⁄©ÿßÿ±ÿ™ ŸÇÿ±ŸÖÿ≤ ÿØÿ± ÿØŸÇ€åŸÇŸá ${minute}!`,\n      injury: `ü§ï ŸÖÿµÿØŸàŸÖ€åÿ™ ÿØÿ± ÿØŸÇ€åŸÇŸá ${minute}`,\n      foul: `üì¢ ÿÆÿ∑ÿß ÿØÿ± ÿØŸÇ€åŸÇŸá ${minute}`,\n      corner: `‚Ü©Ô∏è ⁄©ÿ±ŸÜÿ± ÿØÿ± ÿØŸÇ€åŸÇŸá ${minute}`,\n      freeKick: `üéØ ÿ∂ÿ±ÿ®Ÿá ÿ¢ÿ≤ÿßÿØ ÿØÿ± ÿØŸÇ€åŸÇŸá ${minute}`,\n      penalty: `üéØ ŸæŸÜÿßŸÑÿ™€å ÿØÿ± ÿØŸÇ€åŸÇŸá ${minute}!`\n    };\n    return descriptions[type] || `ÿ±Ÿà€åÿØÿßÿØ ÿØÿ± ÿØŸÇ€åŸÇŸá ${minute}`;\n  }\n\n  // ÿØÿ±€åÿßŸÅÿ™ ŸÜÿßŸÖ ÿ™ÿµÿßÿØŸÅ€å ÿ®ÿßÿ≤€å⁄©ŸÜ\n  static getRandomPlayerName(team) {\n    if (!team.players || team.players.length === 0) return 'ÿ®ÿßÿ≤€å⁄©ŸÜ ŸÜÿßÿ¥ŸÜÿßÿ≥';\n    const player = team.players[Math.floor(Math.random() * team.players.length)];\n    return player.name;\n  }\n\n  // ÿßÿ±ÿ≥ÿßŸÑ ÿ¢ŸæÿØ€åÿ™ ÿßÿ≤ ÿ∑ÿ±€åŸÇ Socket\n  static emitMatchUpdate(match) {\n    const io = global.io;\n    if (io) {\n      io.emit('matchUpdate', {\n        matchId: match._id,\n        score: match.score,\n        events: match.events,\n        matchTime: match.matchTime\n      });\n    }\n  }\n  static delay(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  // ÿØÿ±€åÿßŸÅÿ™ ÿ®ÿßÿ≤€å‚ÄåŸáÿß€å ÿ≤ŸÜÿØŸá\n  static async getLiveMatches() {\n    return await Match.find({\n      isFinished: false\n    }).sort({\n      createdAt: -1\n    }).limit(2) // ŸÅŸÇÿ∑ 2 ÿ®ÿßÿ≤€å ÿ¢ÿÆÿ±\n    .populate('homeTeam', 'teamName').populate('awayTeam', 'teamName');\n  }\n}\nmodule.exports = {\n  MatchService\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNYXRjaCIsInJlcXVpcmUiLCJVc2VyIiwiQ29pblNlcnZpY2UiLCJyZWRpc0NsaWVudCIsImRiQ29uZmlnIiwiZXJyb3IiLCJNYXRjaFNlcnZpY2UiLCJjcmVhdGVNYXRjaCIsImhvbWVUZWFtSWQiLCJhd2F5VGVhbUlkIiwibGVhZ3VlIiwiaG9tZVRlYW0iLCJmaW5kQnlJZCIsImF3YXlUZWFtIiwiRXJyb3IiLCJtYXRjaCIsImhvbWVUZWFtTmFtZSIsInRlYW1OYW1lIiwiYXdheVRlYW1OYW1lIiwic3RhZGl1bSIsInN0YXJ0VGltZSIsIkRhdGUiLCJzYXZlIiwic2ltdWxhdGVNYXRjaCIsIl9pZCIsIm1hdGNoSWQiLCJpc0ZpbmlzaGVkIiwibWludXRlIiwiZGVsYXkiLCJtYXRjaFRpbWUiLCJzaW11bGF0ZU1pbnV0ZSIsImVtaXRNYXRjaFVwZGF0ZSIsInByb2Nlc3NNYXRjaFJlc3VsdCIsImhvbWVQb3dlciIsInRlYW1Qb3dlciIsImF3YXlQb3dlciIsImV2ZW50UHJvYmFiaWxpdHkiLCJNYXRoIiwicmFuZG9tIiwiZXZlbnRUeXBlIiwiZ2V0UmFuZG9tRXZlbnRUeXBlIiwidGVhbSIsImdldEV2ZW50VGVhbSIsImV2ZW50IiwidHlwZSIsInBsYXllck5hbWUiLCJnZXRSYW5kb21QbGF5ZXJOYW1lIiwiZGVzY3JpcHRpb24iLCJnZW5lcmF0ZUV2ZW50RGVzY3JpcHRpb24iLCJldmVudHMiLCJwdXNoIiwicHJvY2Vzc0V2ZW50Iiwid2VpZ2h0IiwidG90YWxXZWlnaHQiLCJyZWR1Y2UiLCJzdW0iLCJob21lQWR2YW50YWdlIiwidG90YWxQb3dlciIsImhvbWVQcm9iYWJpbGl0eSIsInNjb3JlIiwiaG9tZSIsImF3YXkiLCJhcHBseVJlZENhcmRFZmZlY3QiLCJhcHBseUluanVyeUVmZmVjdCIsIm1heCIsInJhbmRvbVBsYXllciIsInBsYXllcnMiLCJmbG9vciIsImxlbmd0aCIsImlzSW5qdXJlZCIsImluanVyeUVuZFRpbWUiLCJub3ciLCJwb2ludHMiLCJnb2Fsc0ZvciIsImdvYWxzQWdhaW5zdCIsIm1hdGNoZXNQbGF5ZWQiLCJhZGRNYXRjaEluY29tZSIsImRlc2NyaXB0aW9ucyIsImdvYWwiLCJ5ZWxsb3dDYXJkIiwicmVkQ2FyZCIsImluanVyeSIsImZvdWwiLCJjb3JuZXIiLCJmcmVlS2ljayIsInBlbmFsdHkiLCJwbGF5ZXIiLCJuYW1lIiwiaW8iLCJnbG9iYWwiLCJlbWl0IiwibXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJnZXRMaXZlTWF0Y2hlcyIsImZpbmQiLCJzb3J0IiwiY3JlYXRlZEF0IiwibGltaXQiLCJwb3B1bGF0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy90cnpwL0Rlc2t0b3AvRm9vdEJhbGxXZWIvc2VydmVyL3NlcnZpY2VzLyIsInNvdXJjZXMiOlsiTWF0Y2hTZXJ2aWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgTWF0Y2ggfSA9IHJlcXVpcmUoJy4uL21vZGVscy9NYXRjaC5qcycpO1xuY29uc3QgVXNlciA9IHJlcXVpcmUoJy4uL21vZGVscy91c2VyLmpzJyk7XG5jb25zdCBDb2luU2VydmljZSA9IHJlcXVpcmUoJy4vQ29pblNlcnZpY2UuanMnKTtcblxuLy8gcmVkaXNDbGllbnQg2KfYrtiq24zYp9ix24wg2KfYs9iqXG5sZXQgcmVkaXNDbGllbnQgPSBudWxsO1xudHJ5IHtcbiAgY29uc3QgZGJDb25maWcgPSByZXF1aXJlKCcuLi9jb25maWcvZGF0YWJhc2UuanMnKTtcbiAgcmVkaXNDbGllbnQgPSBkYkNvbmZpZy5yZWRpc0NsaWVudDtcbn0gY2F0Y2ggKGVycm9yKSB7XG4gIC8vIFJlZGlzINin2K7YqtuM2KfYsduMINin2LPYqlxufVxuXG5jbGFzcyBNYXRjaFNlcnZpY2Uge1xuICBcbiAgLy8g2KfbjNis2KfYryDYqNin2LLbjCDYrNiv24zYr1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlTWF0Y2goaG9tZVRlYW1JZCwgYXdheVRlYW1JZCwgbGVhZ3VlKSB7XG4gICAgY29uc3QgaG9tZVRlYW0gPSBhd2FpdCBVc2VyLmZpbmRCeUlkKGhvbWVUZWFtSWQpO1xuICAgIGNvbnN0IGF3YXlUZWFtID0gYXdhaXQgVXNlci5maW5kQnlJZChhd2F5VGVhbUlkKTtcbiAgICBcbiAgICBpZiAoIWhvbWVUZWFtIHx8ICFhd2F5VGVhbSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCfYqtuM2YXigIzZh9inINuM2KfZgdiqINmG2LTYr9mG2K8nKTtcbiAgICB9XG5cbiAgICBjb25zdCBtYXRjaCA9IG5ldyBNYXRjaCh7XG4gICAgICBob21lVGVhbTogaG9tZVRlYW1JZCxcbiAgICAgIGF3YXlUZWFtOiBhd2F5VGVhbUlkLFxuICAgICAgaG9tZVRlYW1OYW1lOiBob21lVGVhbS50ZWFtTmFtZSxcbiAgICAgIGF3YXlUZWFtTmFtZTogYXdheVRlYW0udGVhbU5hbWUsXG4gICAgICBzdGFkaXVtOiBgJHtob21lVGVhbS50ZWFtTmFtZX0gU3RhZGl1bWAsXG4gICAgICBsZWFndWUsXG4gICAgICBzdGFydFRpbWU6IG5ldyBEYXRlKClcbiAgICB9KTtcblxuICAgIGF3YWl0IG1hdGNoLnNhdmUoKTtcbiAgICBcbiAgICAvLyDYtNix2YjYuSDYtNio24zZh+KAjNiz2KfYstuMXG4gICAgdGhpcy5zaW11bGF0ZU1hdGNoKG1hdGNoLl9pZCk7XG4gICAgXG4gICAgcmV0dXJuIG1hdGNoO1xuICB9XG5cbiAgLy8g2LTYqNuM2YfigIzYs9in2LLbjCDYqNin2LLbjFxuICBzdGF0aWMgYXN5bmMgc2ltdWxhdGVNYXRjaChtYXRjaElkKSB7XG4gICAgY29uc3QgbWF0Y2ggPSBhd2FpdCBNYXRjaC5maW5kQnlJZChtYXRjaElkKTtcbiAgICBpZiAoIW1hdGNoIHx8IG1hdGNoLmlzRmluaXNoZWQpIHJldHVybjtcblxuICAgIGNvbnN0IGhvbWVUZWFtID0gYXdhaXQgVXNlci5maW5kQnlJZChtYXRjaC5ob21lVGVhbSk7XG4gICAgY29uc3QgYXdheVRlYW0gPSBhd2FpdCBVc2VyLmZpbmRCeUlkKG1hdGNoLmF3YXlUZWFtKTtcblxuICAgIC8vINi02KjbjNmH4oCM2LPYp9iy24wg2K/ZgtuM2YLZhyDYqNmHINiv2YLbjNmC2YdcbiAgICBmb3IgKGxldCBtaW51dGUgPSAxOyBtaW51dGUgPD0gOTA7IG1pbnV0ZSsrKSB7XG4gICAgICBhd2FpdCB0aGlzLmRlbGF5KDEwMCk7IC8vINiq2KfYrtuM2LEgMTAwbXMg2KjYsdin24wg2YfYsSDYr9mC24zZgtmHXG4gICAgICBcbiAgICAgIG1hdGNoLm1hdGNoVGltZSA9IG1pbnV0ZTtcbiAgICAgIGF3YWl0IHRoaXMuc2ltdWxhdGVNaW51dGUobWF0Y2gsIGhvbWVUZWFtLCBhd2F5VGVhbSwgbWludXRlKTtcbiAgICAgIFxuICAgICAgYXdhaXQgbWF0Y2guc2F2ZSgpO1xuICAgICAgXG4gICAgICAvLyDYp9ix2LPYp9mEINii2b7Yr9uM2Kog2KfYsiDYt9ix24zZgiBTb2NrZXQuaW9cbiAgICAgIHRoaXMuZW1pdE1hdGNoVXBkYXRlKG1hdGNoKTtcbiAgICB9XG5cbiAgICAvLyDZvtin24zYp9mGINio2KfYstuMXG4gICAgbWF0Y2guaXNGaW5pc2hlZCA9IHRydWU7XG4gICAgYXdhaXQgbWF0Y2guc2F2ZSgpO1xuXG4gICAgLy8g2YXYrdin2LPYqNmHINmG2KrYp9uM2Kwg2Ygg2K/Ysdii2YXYr1xuICAgIGF3YWl0IHRoaXMucHJvY2Vzc01hdGNoUmVzdWx0KG1hdGNoLCBob21lVGVhbSwgYXdheVRlYW0pO1xuICB9XG5cbiAgLy8g2LTYqNuM2YfigIzYs9in2LLbjCDbjNqpINiv2YLbjNmC2Ycg2KfYsiDYqNin2LLbjFxuICBzdGF0aWMgYXN5bmMgc2ltdWxhdGVNaW51dGUobWF0Y2gsIGhvbWVUZWFtLCBhd2F5VGVhbSwgbWludXRlKSB7XG4gICAgY29uc3QgaG9tZVBvd2VyID0gaG9tZVRlYW0udGVhbVBvd2VyO1xuICAgIGNvbnN0IGF3YXlQb3dlciA9IGF3YXlUZWFtLnRlYW1Qb3dlcjtcbiAgICBcbiAgICAvLyDYp9it2KrZhdin2YQg2YjZgtmI2Lkg2LHZiNuM2K/Yp9ivINiv2LEg2YfYsSDYr9mC24zZgtmHXG4gICAgY29uc3QgZXZlbnRQcm9iYWJpbGl0eSA9IDAuMTU7IC8vIDE1JSBjaGFuY2UgcGVyIG1pbnV0ZVxuICAgIFxuICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgZXZlbnRQcm9iYWJpbGl0eSkge1xuICAgICAgY29uc3QgZXZlbnRUeXBlID0gdGhpcy5nZXRSYW5kb21FdmVudFR5cGUoKTtcbiAgICAgIGNvbnN0IHRlYW0gPSB0aGlzLmdldEV2ZW50VGVhbShob21lUG93ZXIsIGF3YXlQb3dlcik7XG4gICAgICBcbiAgICAgIGNvbnN0IGV2ZW50ID0ge1xuICAgICAgICBtaW51dGUsXG4gICAgICAgIHR5cGU6IGV2ZW50VHlwZSxcbiAgICAgICAgdGVhbSxcbiAgICAgICAgcGxheWVyTmFtZTogdGhpcy5nZXRSYW5kb21QbGF5ZXJOYW1lKHRlYW0gPT09ICdob21lJyA/IGhvbWVUZWFtIDogYXdheVRlYW0pLFxuICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5nZW5lcmF0ZUV2ZW50RGVzY3JpcHRpb24oZXZlbnRUeXBlLCB0ZWFtLCBtaW51dGUpXG4gICAgICB9O1xuXG4gICAgICBtYXRjaC5ldmVudHMucHVzaChldmVudCk7XG4gICAgICBcbiAgICAgIC8vINm+2LHYr9in2LLYtCDYsdmI24zYr9in2K9cbiAgICAgIGF3YWl0IHRoaXMucHJvY2Vzc0V2ZW50KGV2ZW50LCBtYXRjaCwgaG9tZVRlYW0sIGF3YXlUZWFtKTtcbiAgICB9XG4gIH1cblxuICAvLyDYr9ix24zYp9mB2Kog2YbZiNi5INix2YjbjNiv2KfYryDYqti12KfYr9mB24xcbiAgc3RhdGljIGdldFJhbmRvbUV2ZW50VHlwZSgpIHtcbiAgICBjb25zdCBldmVudHMgPSBbXG4gICAgICB7IHR5cGU6ICdnb2FsJywgd2VpZ2h0OiA4IH0sXG4gICAgICB7IHR5cGU6ICd5ZWxsb3dDYXJkJywgd2VpZ2h0OiAxMiB9LFxuICAgICAgeyB0eXBlOiAncmVkQ2FyZCcsIHdlaWdodDogMiB9LFxuICAgICAgeyB0eXBlOiAnaW5qdXJ5Jywgd2VpZ2h0OiAzIH0sXG4gICAgICB7IHR5cGU6ICdmb3VsJywgd2VpZ2h0OiAxNSB9LFxuICAgICAgeyB0eXBlOiAnY29ybmVyJywgd2VpZ2h0OiAxMCB9LFxuICAgICAgeyB0eXBlOiAnZnJlZUtpY2snLCB3ZWlnaHQ6IDggfSxcbiAgICAgIHsgdHlwZTogJ3BlbmFsdHknLCB3ZWlnaHQ6IDIgfVxuICAgIF07XG5cbiAgICBjb25zdCB0b3RhbFdlaWdodCA9IGV2ZW50cy5yZWR1Y2UoKHN1bSwgZXZlbnQpID0+IHN1bSArIGV2ZW50LndlaWdodCwgMCk7XG4gICAgbGV0IHJhbmRvbSA9IE1hdGgucmFuZG9tKCkgKiB0b3RhbFdlaWdodDtcblxuICAgIGZvciAoY29uc3QgZXZlbnQgb2YgZXZlbnRzKSB7XG4gICAgICByYW5kb20gLT0gZXZlbnQud2VpZ2h0O1xuICAgICAgaWYgKHJhbmRvbSA8PSAwKSB7XG4gICAgICAgIHJldHVybiBldmVudC50eXBlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAnZm91bCc7XG4gIH1cblxuICAvLyDYp9mG2KrYrtin2Kgg2KrbjNmFINio2LHYp9uMINix2YjbjNiv2KfYryAo2KjYsSDYp9iz2KfYsyDZgtiv2LHYqilcbiAgc3RhdGljIGdldEV2ZW50VGVhbShob21lUG93ZXIsIGF3YXlQb3dlcikge1xuICAgIGNvbnN0IGhvbWVBZHZhbnRhZ2UgPSAxLjE7IC8vIEFkdmFudGFnZSBmb3IgaG9tZSB0ZWFtXG4gICAgY29uc3QgdG90YWxQb3dlciA9IChob21lUG93ZXIgKiBob21lQWR2YW50YWdlKSArIGF3YXlQb3dlcjtcbiAgICBjb25zdCBob21lUHJvYmFiaWxpdHkgPSAoaG9tZVBvd2VyICogaG9tZUFkdmFudGFnZSkgLyB0b3RhbFBvd2VyO1xuICAgIFxuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpIDwgaG9tZVByb2JhYmlsaXR5ID8gJ2hvbWUnIDogJ2F3YXknO1xuICB9XG5cbiAgLy8g2b7Ysdiv2KfYsti0INix2YjbjNiv2KfYr1xuICBzdGF0aWMgYXN5bmMgcHJvY2Vzc0V2ZW50KGV2ZW50LCBtYXRjaCwgaG9tZVRlYW0sIGF3YXlUZWFtKSB7XG4gICAgY29uc3QgdGVhbSA9IGV2ZW50LnRlYW0gPT09ICdob21lJyA/IGhvbWVUZWFtIDogYXdheVRlYW07XG4gICAgXG4gICAgc3dpdGNoIChldmVudC50eXBlKSB7XG4gICAgICBjYXNlICdnb2FsJzpcbiAgICAgICAgaWYgKGV2ZW50LnRlYW0gPT09ICdob21lJykge1xuICAgICAgICAgIG1hdGNoLnNjb3JlLmhvbWUrKztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtYXRjaC5zY29yZS5hd2F5Kys7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgY2FzZSAncmVkQ2FyZCc6XG4gICAgICAgIC8vINqp2KfZh9i0INmC2K/YsdiqINiq24zZhSDYqNix2KfbjCDYqNmC24zZhyDYqNin2LLbjFxuICAgICAgICBhd2FpdCB0aGlzLmFwcGx5UmVkQ2FyZEVmZmVjdCh0ZWFtKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgY2FzZSAnaW5qdXJ5JzpcbiAgICAgICAgLy8g2YXYtdiv2YjZhduM2Kog2KjYp9iy24zaqdmGXG4gICAgICAgIGF3YWl0IHRoaXMuYXBwbHlJbmp1cnlFZmZlY3QodGVhbSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgICBcbiAgICAgIGNhc2UgJ3BlbmFsdHknOlxuICAgICAgICAvLyA4MCUgY2hhbmNlIHRvIHNjb3JlIHBlbmFsdHlcbiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjgpIHtcbiAgICAgICAgICBpZiAoZXZlbnQudGVhbSA9PT0gJ2hvbWUnKSB7XG4gICAgICAgICAgICBtYXRjaC5zY29yZS5ob21lKys7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1hdGNoLnNjb3JlLmF3YXkrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLy8g2KfYudmF2KfZhCDYp9ir2LEg2qnYp9ix2Kog2YLYsdmF2LJcbiAgc3RhdGljIGFzeW5jIGFwcGx5UmVkQ2FyZEVmZmVjdCh0ZWFtKSB7XG4gICAgLy8g2qnYp9mH2LQg2YLYr9ix2Kog2KrbjNmFXG4gICAgdGVhbS50ZWFtUG93ZXIgPSBNYXRoLm1heCg1MCwgdGVhbS50ZWFtUG93ZXIgLSA1KTtcbiAgICBhd2FpdCB0ZWFtLnNhdmUoKTtcbiAgfVxuXG4gIC8vINin2LnZhdin2YQg2KfYq9ixINmF2LXYr9mI2YXbjNiqXG4gIHN0YXRpYyBhc3luYyBhcHBseUluanVyeUVmZmVjdCh0ZWFtKSB7XG4gICAgY29uc3QgcmFuZG9tUGxheWVyID0gdGVhbS5wbGF5ZXJzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRlYW0ucGxheWVycy5sZW5ndGgpXTtcbiAgICBpZiAocmFuZG9tUGxheWVyKSB7XG4gICAgICByYW5kb21QbGF5ZXIuaXNJbmp1cmVkID0gdHJ1ZTtcbiAgICAgIHJhbmRvbVBsYXllci5pbmp1cnlFbmRUaW1lID0gbmV3IERhdGUoRGF0ZS5ub3coKSArIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKTsgLy8gNyDYsdmI2LJcbiAgICAgIGF3YWl0IHRlYW0uc2F2ZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8vINm+2LHYr9in2LLYtCDZhtiq24zYrNmHINmG2YfYp9uM24wg2KjYp9iy24xcbiAgc3RhdGljIGFzeW5jIHByb2Nlc3NNYXRjaFJlc3VsdChtYXRjaCwgaG9tZVRlYW0sIGF3YXlUZWFtKSB7XG4gICAgLy8g2YXYrdin2LPYqNmHINin2YXYqtuM2KfYslxuICAgIGlmIChtYXRjaC5zY29yZS5ob21lID4gbWF0Y2guc2NvcmUuYXdheSkge1xuICAgICAgaG9tZVRlYW0ubGVhZ3VlLnBvaW50cyArPSAzO1xuICAgIH0gZWxzZSBpZiAobWF0Y2guc2NvcmUuaG9tZSA8IG1hdGNoLnNjb3JlLmF3YXkpIHtcbiAgICAgIGF3YXlUZWFtLmxlYWd1ZS5wb2ludHMgKz0gMztcbiAgICB9IGVsc2Uge1xuICAgICAgaG9tZVRlYW0ubGVhZ3VlLnBvaW50cyArPSAxO1xuICAgICAgYXdheVRlYW0ubGVhZ3VlLnBvaW50cyArPSAxO1xuICAgIH1cblxuICAgIC8vINii2b7Yr9uM2Kog2KLZhdin2LFcbiAgICBob21lVGVhbS5sZWFndWUuZ29hbHNGb3IgKz0gbWF0Y2guc2NvcmUuaG9tZTtcbiAgICBob21lVGVhbS5sZWFndWUuZ29hbHNBZ2FpbnN0ICs9IG1hdGNoLnNjb3JlLmF3YXk7XG4gICAgaG9tZVRlYW0ubGVhZ3VlLm1hdGNoZXNQbGF5ZWQgKz0gMTtcblxuICAgIGF3YXlUZWFtLmxlYWd1ZS5nb2Fsc0ZvciArPSBtYXRjaC5zY29yZS5hd2F5O1xuICAgIGF3YXlUZWFtLmxlYWd1ZS5nb2Fsc0FnYWluc3QgKz0gbWF0Y2guc2NvcmUuaG9tZTtcbiAgICBhd2F5VGVhbS5sZWFndWUubWF0Y2hlc1BsYXllZCArPSAxO1xuXG4gICAgYXdhaXQgaG9tZVRlYW0uc2F2ZSgpO1xuICAgIGF3YWl0IGF3YXlUZWFtLnNhdmUoKTtcblxuICAgIC8vINin2LbYp9mB2Ycg2qnYsdiv2YYg2K/Ysdii2YXYryDYp9iyIGZhY2lsaXRpZXNcbiAgICBhd2FpdCBDb2luU2VydmljZS5hZGRNYXRjaEluY29tZShob21lVGVhbS5faWQsICdzcG9uc29yJyk7XG4gICAgYXdhaXQgQ29pblNlcnZpY2UuYWRkTWF0Y2hJbmNvbWUoaG9tZVRlYW0uX2lkLCAnc3RhZGl1bScpO1xuICAgIGF3YWl0IENvaW5TZXJ2aWNlLmFkZE1hdGNoSW5jb21lKGhvbWVUZWFtLl9pZCwgJ3R2UmlnaHRzJyk7XG4gICAgYXdhaXQgQ29pblNlcnZpY2UuYWRkTWF0Y2hJbmNvbWUoaG9tZVRlYW0uX2lkLCAneW91dGhDYW1wJyk7XG5cbiAgICBhd2FpdCBDb2luU2VydmljZS5hZGRNYXRjaEluY29tZShhd2F5VGVhbS5faWQsICdzcG9uc29yJyk7XG4gICAgYXdhaXQgQ29pblNlcnZpY2UuYWRkTWF0Y2hJbmNvbWUoYXdheVRlYW0uX2lkLCAndHZSaWdodHMnKTtcbiAgICBhd2FpdCBDb2luU2VydmljZS5hZGRNYXRjaEluY29tZShhd2F5VGVhbS5faWQsICd5b3V0aENhbXAnKTtcbiAgfVxuXG4gIC8vINiq2YjZhNuM2K8g2KrZiNi224zYrSDYsdmI24zYr9in2K9cbiAgc3RhdGljIGdlbmVyYXRlRXZlbnREZXNjcmlwdGlvbih0eXBlLCB0ZWFtLCBtaW51dGUpIHtcbiAgICBjb25zdCBkZXNjcmlwdGlvbnMgPSB7XG4gICAgICBnb2FsOiBg4pq9INqv2YQg2LLbjNio2Kcg2K/YsSDYr9mC24zZgtmHICR7bWludXRlfSFgLFxuICAgICAgeWVsbG93Q2FyZDogYPCfn6gg2qnYp9ix2Kog2LLYsdivINiv2LEg2K/ZgtuM2YLZhyAke21pbnV0ZX1gLFxuICAgICAgcmVkQ2FyZDogYPCfn6Ug2qnYp9ix2Kog2YLYsdmF2LIg2K/YsSDYr9mC24zZgtmHICR7bWludXRlfSFgLFxuICAgICAgaW5qdXJ5OiBg8J+klSDZhdi12K/ZiNmF24zYqiDYr9ixINiv2YLbjNmC2YcgJHttaW51dGV9YCxcbiAgICAgIGZvdWw6IGDwn5OiINiu2LfYpyDYr9ixINiv2YLbjNmC2YcgJHttaW51dGV9YCxcbiAgICAgIGNvcm5lcjogYOKGqe+4jyDaqdix2YbYsSDYr9ixINiv2YLbjNmC2YcgJHttaW51dGV9YCxcbiAgICAgIGZyZWVLaWNrOiBg8J+OryDYttix2KjZhyDYotiy2KfYryDYr9ixINiv2YLbjNmC2YcgJHttaW51dGV9YCxcbiAgICAgIHBlbmFsdHk6IGDwn46vINm+2YbYp9mE2KrbjCDYr9ixINiv2YLbjNmC2YcgJHttaW51dGV9IWBcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRlc2NyaXB0aW9uc1t0eXBlXSB8fCBg2LHZiNuM2K/Yp9ivINiv2LEg2K/ZgtuM2YLZhyAke21pbnV0ZX1gO1xuICB9XG5cbiAgLy8g2K/YsduM2KfZgdiqINmG2KfZhSDYqti12KfYr9mB24wg2KjYp9iy24zaqdmGXG4gIHN0YXRpYyBnZXRSYW5kb21QbGF5ZXJOYW1lKHRlYW0pIHtcbiAgICBpZiAoIXRlYW0ucGxheWVycyB8fCB0ZWFtLnBsYXllcnMubGVuZ3RoID09PSAwKSByZXR1cm4gJ9io2KfYstuM2qnZhiDZhtin2LTZhtin2LMnO1xuICAgIGNvbnN0IHBsYXllciA9IHRlYW0ucGxheWVyc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0ZWFtLnBsYXllcnMubGVuZ3RoKV07XG4gICAgcmV0dXJuIHBsYXllci5uYW1lO1xuICB9XG5cbiAgLy8g2KfYsdiz2KfZhCDYotm+2K/bjNiqINin2LIg2LfYsduM2YIgU29ja2V0XG4gIHN0YXRpYyBlbWl0TWF0Y2hVcGRhdGUobWF0Y2gpIHtcbiAgICBjb25zdCBpbyA9IGdsb2JhbC5pbztcbiAgICBpZiAoaW8pIHtcbiAgICAgIGlvLmVtaXQoJ21hdGNoVXBkYXRlJywge1xuICAgICAgICBtYXRjaElkOiBtYXRjaC5faWQsXG4gICAgICAgIHNjb3JlOiBtYXRjaC5zY29yZSxcbiAgICAgICAgZXZlbnRzOiBtYXRjaC5ldmVudHMsXG4gICAgICAgIG1hdGNoVGltZTogbWF0Y2gubWF0Y2hUaW1lXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZGVsYXkobXMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG4gIH1cblxuICAvLyDYr9ix24zYp9mB2Kog2KjYp9iy24zigIzZh9in24wg2LLZhtiv2YdcbiAgc3RhdGljIGFzeW5jIGdldExpdmVNYXRjaGVzKCkge1xuICAgIHJldHVybiBhd2FpdCBNYXRjaC5maW5kKHsgXG4gICAgICBpc0ZpbmlzaGVkOiBmYWxzZSBcbiAgICB9KVxuICAgIC5zb3J0KHsgY3JlYXRlZEF0OiAtMSB9KVxuICAgIC5saW1pdCgyKSAvLyDZgdmC2LcgMiDYqNin2LLbjCDYotiu2LFcbiAgICAucG9wdWxhdGUoJ2hvbWVUZWFtJywgJ3RlYW1OYW1lJylcbiAgICAucG9wdWxhdGUoJ2F3YXlUZWFtJywgJ3RlYW1OYW1lJyk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7IE1hdGNoU2VydmljZSB9OyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTTtFQUFFQTtBQUFNLENBQUMsR0FBR0MsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBQy9DLE1BQU1DLElBQUksR0FBR0QsT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBQ3pDLE1BQU1FLFdBQVcsR0FBR0YsT0FBTyxDQUFDLGtCQUFrQixDQUFDOztBQUUvQztBQUNBLElBQUlHLFdBQVcsR0FBRyxJQUFJO0FBQ3RCLElBQUk7RUFDRixNQUFNQyxRQUFRLEdBQUdKLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQztFQUNqREcsV0FBVyxHQUFHQyxRQUFRLENBQUNELFdBQVc7QUFDcEMsQ0FBQyxDQUFDLE9BQU9FLEtBQUssRUFBRTtFQUNkO0FBQUE7QUFHRixNQUFNQyxZQUFZLENBQUM7RUFFakI7RUFDQSxhQUFhQyxXQUFXQSxDQUFDQyxVQUFVLEVBQUVDLFVBQVUsRUFBRUMsTUFBTSxFQUFFO0lBQ3ZELE1BQU1DLFFBQVEsR0FBRyxNQUFNVixJQUFJLENBQUNXLFFBQVEsQ0FBQ0osVUFBVSxDQUFDO0lBQ2hELE1BQU1LLFFBQVEsR0FBRyxNQUFNWixJQUFJLENBQUNXLFFBQVEsQ0FBQ0gsVUFBVSxDQUFDO0lBRWhELElBQUksQ0FBQ0UsUUFBUSxJQUFJLENBQUNFLFFBQVEsRUFBRTtNQUMxQixNQUFNLElBQUlDLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQztJQUN0QztJQUVBLE1BQU1DLEtBQUssR0FBRyxJQUFJaEIsS0FBSyxDQUFDO01BQ3RCWSxRQUFRLEVBQUVILFVBQVU7TUFDcEJLLFFBQVEsRUFBRUosVUFBVTtNQUNwQk8sWUFBWSxFQUFFTCxRQUFRLENBQUNNLFFBQVE7TUFDL0JDLFlBQVksRUFBRUwsUUFBUSxDQUFDSSxRQUFRO01BQy9CRSxPQUFPLEVBQUUsR0FBR1IsUUFBUSxDQUFD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","map":{"version":3,"names":["Match","require","User","CoinService","redisClient","dbConfig","error","MatchService","createMatch","homeTeamId","awayTeamId","league","homeTeam","findById","awayTeam","Error","match","homeTeamName","teamName","awayTeamName","stadium","startTime","Date","save","simulateMatch","_id","matchId","isFinished","minute","delay","matchTime","simulateMinute","emitMatchUpdate","processMatchResult","homePower","teamPower","awayPower","eventProbability","Math","random","eventType","getRandomEventType","team","getEventTeam","event","type","playerName","getRandomPlayerName","description","generateEventDescription","events","push","processEvent","weight","totalWeight","reduce","sum","homeAdvantage","totalPower","homeProbability","score","home","away","applyRedCardEffect","applyInjuryEffect","max","randomPlayer","players","floor","length","isInjured","injuryEndTime","now","points","goalsFor","goalsAgainst","matchesPlayed","addMatchIncome","descriptions","goal","yellowCard","redCard","injury","foul","corner","freeKick","penalty","player","name","io","global","emit","ms","Promise","resolve","setTimeout","getLiveMatches","find","sort","createdAt","limit","populate","module","exports"],"sourceRoot":"/Users/trzp/Desktop/FootBallWeb/server/services/","sources":["MatchService.js"],"sourcesContent":["const { Match } = require('../models/Match.js');\nconst User = require('../models/user.js');\nconst CoinService = require('./CoinService.js');\n\n// redisClient ÿßÿÆÿ™€åÿßÿ±€å ÿßÿ≥ÿ™\nlet redisClient = null;\ntry {\n  const dbConfig = require('../config/database.js');\n  redisClient = dbConfig.redisClient;\n} catch (error) {\n  // Redis ÿßÿÆÿ™€åÿßÿ±€å ÿßÿ≥ÿ™\n}\n\nclass MatchService {\n  \n  // ÿß€åÿ¨ÿßÿØ ÿ®ÿßÿ≤€å ÿ¨ÿØ€åÿØ\n  static async createMatch(homeTeamId, awayTeamId, league) {\n    const homeTeam = await User.findById(homeTeamId);\n    const awayTeam = await User.findById(awayTeamId);\n    \n    if (!homeTeam || !awayTeam) {\n      throw new Error('ÿ™€åŸÖ‚ÄåŸáÿß €åÿßŸÅÿ™ ŸÜÿ¥ÿØŸÜÿØ');\n    }\n\n    const match = new Match({\n      homeTeam: homeTeamId,\n      awayTeam: awayTeamId,\n      homeTeamName: homeTeam.teamName,\n      awayTeamName: awayTeam.teamName,\n      stadium: `${homeTeam.teamName} Stadium`,\n      league,\n      startTime: new Date()\n    });\n\n    await match.save();\n    \n    // ÿ¥ÿ±Ÿàÿπ ÿ¥ÿ®€åŸá‚Äåÿ≥ÿßÿ≤€å\n    this.simulateMatch(match._id);\n    \n    return match;\n  }\n\n  // ÿ¥ÿ®€åŸá‚Äåÿ≥ÿßÿ≤€å ÿ®ÿßÿ≤€å\n  static async simulateMatch(matchId) {\n    const match = await Match.findById(matchId);\n    if (!match || match.isFinished) return;\n\n    const homeTeam = await User.findById(match.homeTeam);\n    const awayTeam = await User.findById(match.awayTeam);\n\n    // ÿ¥ÿ®€åŸá‚Äåÿ≥ÿßÿ≤€å ÿØŸÇ€åŸÇŸá ÿ®Ÿá ÿØŸÇ€åŸÇŸá\n    for (let minute = 1; minute <= 90; minute++) {\n      await this.delay(100); // ÿ™ÿßÿÆ€åÿ± 100ms ÿ®ÿ±ÿß€å Ÿáÿ± ÿØŸÇ€åŸÇŸá\n      \n      match.matchTime = minute;\n      await this.simulateMinute(match, homeTeam, awayTeam, minute);\n      \n      await match.save();\n      \n      // ÿßÿ±ÿ≥ÿßŸÑ ÿ¢ŸæÿØ€åÿ™ ÿßÿ≤ ÿ∑ÿ±€åŸÇ Socket.io\n      this.emitMatchUpdate(match);\n    }\n\n    // Ÿæÿß€åÿßŸÜ ÿ®ÿßÿ≤€å\n    match.isFinished = true;\n    await match.save();\n\n    // ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ŸÜÿ™ÿß€åÿ¨ Ÿà ÿØÿ±ÿ¢ŸÖÿØ\n    await this.processMatchResult(match, homeTeam, awayTeam);\n  }\n\n  // ÿ¥ÿ®€åŸá‚Äåÿ≥ÿßÿ≤€å €å⁄© ÿØŸÇ€åŸÇŸá ÿßÿ≤ ÿ®ÿßÿ≤€å\n  static async simulateMinute(match, homeTeam, awayTeam, minute) {\n    const homePower = homeTeam.teamPower;\n    const awayPower = awayTeam.teamPower;\n    \n    // ÿßÿ≠ÿ™ŸÖÿßŸÑ ŸàŸÇŸàÿπ ÿ±Ÿà€åÿØÿßÿØ ÿØÿ± Ÿáÿ± ÿØŸÇ€åŸÇŸá\n    const eventProbability = 0.15; // 15% chance per minute\n    \n    if (Math.random() < eventProbability) {\n      const eventType = this.getRandomEventType();\n      const team = this.getEventTeam(homePower, awayPower);\n      \n      const event = {\n        minute,\n        type: eventType,\n        team,\n        playerName: this.getRandomPlayerName(team === 'home' ? homeTeam : awayTeam),\n        description: this.generateEventDescription(eventType, team, minute)\n      };\n\n      match.events.push(event);\n      \n      // Ÿæÿ±ÿØÿßÿ≤ÿ¥ ÿ±Ÿà€åÿØÿßÿØ\n      await this.processEvent(event, match, homeTeam, awayTeam);\n    }\n  }\n\n  // ÿØÿ±€åÿßŸÅÿ™ ŸÜŸàÿπ ÿ±Ÿà€åÿØÿßÿØ ÿ™ÿµÿßÿØŸÅ€å\n  static getRandomEventType() {\n    const events = [\n      { type: 'goal', weight: 8 },\n      { type: 'yellowCard', weight: 12 },\n      { type: 'redCard', weight: 2 },\n      { type: 'injury', weight: 3 },\n      { type: 'foul', weight: 15 },\n      { type: 'corner', weight: 10 },\n      { type: 'freeKick', weight: 8 },\n      { type: 'penalty', weight: 2 }\n    ];\n\n    const totalWeight = events.reduce((sum, event) => sum + event.weight, 0);\n    let random = Math.random() * totalWeight;\n\n    for (const event of events) {\n      random -= event.weight;\n      if (random <= 0) {\n        return event.type;\n      }\n    }\n\n    return 'foul';\n  }\n\n  // ÿßŸÜÿ™ÿÆÿßÿ® ÿ™€åŸÖ ÿ®ÿ±ÿß€å ÿ±Ÿà€åÿØÿßÿØ (ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ŸÇÿØÿ±ÿ™)\n  static getEventTeam(homePower, awayPower) {\n    const homeAdvantage = 1.1; // Advantage for home team\n    const totalPower = (homePower * homeAdvantage) + awayPower;\n    const homeProbability = (homePower * homeAdvantage) / totalPower;\n    \n    return Math.random() < homeProbability ? 'home' : 'away';\n  }\n\n  // Ÿæÿ±ÿØÿßÿ≤ÿ¥ ÿ±Ÿà€åÿØÿßÿØ\n  static async processEvent(event, match, homeTeam, awayTeam) {\n    const team = event.team === 'home' ? homeTeam : awayTeam;\n    \n    switch (event.type) {\n      case 'goal':\n        if (event.team === 'home') {\n          match.score.home++;\n        } else {\n          match.score.away++;\n        }\n        break;\n        \n      case 'redCard':\n        // ⁄©ÿßŸáÿ¥ ŸÇÿØÿ±ÿ™ ÿ™€åŸÖ ÿ®ÿ±ÿß€å ÿ®ŸÇ€åŸá ÿ®ÿßÿ≤€å\n        await this.applyRedCardEffect(team);\n        break;\n        \n      case 'injury':\n        // ŸÖÿµÿØŸàŸÖ€åÿ™ ÿ®ÿßÿ≤€å⁄©ŸÜ\n        await this.applyInjuryEffect(team);\n        break;\n        \n      case 'penalty':\n        // 80% chance to score penalty\n        if (Math.random() < 0.8) {\n          if (event.team === 'home') {\n            match.score.home++;\n          } else {\n            match.score.away++;\n          }\n        }\n        break;\n    }\n  }\n\n  // ÿßÿπŸÖÿßŸÑ ÿßÿ´ÿ± ⁄©ÿßÿ±ÿ™ ŸÇÿ±ŸÖÿ≤\n  static async applyRedCardEffect(team) {\n    // ⁄©ÿßŸáÿ¥ ŸÇÿØÿ±ÿ™ ÿ™€åŸÖ\n    team.teamPower = Math.max(50, team.teamPower - 5);\n    await team.save();\n  }\n\n  // ÿßÿπŸÖÿßŸÑ ÿßÿ´ÿ± ŸÖÿµÿØŸàŸÖ€åÿ™\n  static async applyInjuryEffect(team) {\n    const randomPlayer = team.players[Math.floor(Math.random() * team.players.length)];\n    if (randomPlayer) {\n      randomPlayer.isInjured = true;\n      randomPlayer.injuryEndTime = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000); // 7 ÿ±Ÿàÿ≤\n      await team.save();\n    }\n  }\n\n  // Ÿæÿ±ÿØÿßÿ≤ÿ¥ ŸÜÿ™€åÿ¨Ÿá ŸÜŸáÿß€å€å ÿ®ÿßÿ≤€å\n  static async processMatchResult(match, homeTeam, awayTeam) {\n    // ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ÿßŸÖÿ™€åÿßÿ≤\n    if (match.score.home > match.score.away) {\n      homeTeam.league.points += 3;\n    } else if (match.score.home < match.score.away) {\n      awayTeam.league.points += 3;\n    } else {\n      homeTeam.league.points += 1;\n      awayTeam.league.points += 1;\n    }\n\n    // ÿ¢ŸæÿØ€åÿ™ ÿ¢ŸÖÿßÿ±\n    homeTeam.league.goalsFor += match.score.home;\n    homeTeam.league.goalsAgainst += match.score.away;\n    homeTeam.league.matchesPlayed += 1;\n\n    awayTeam.league.goalsFor += match.score.away;\n    awayTeam.league.goalsAgainst += match.score.home;\n    awayTeam.league.matchesPlayed += 1;\n\n    await homeTeam.save();\n    await awayTeam.save();\n\n    // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ ÿØÿ±ÿ¢ŸÖÿØ ÿßÿ≤ facilities\n    await CoinService.addMatchIncome(homeTeam._id, 'sponsor');\n    await CoinService.addMatchIncome(homeTeam._id, 'stadium');\n    await CoinService.addMatchIncome(homeTeam._id, 'tvRights');\n    await CoinService.addMatchIncome(homeTeam._id, 'youthCamp');\n\n    await CoinService.addMatchIncome(awayTeam._id, 'sponsor');\n    await CoinService.addMatchIncome(awayTeam._id, 'tvRights');\n    await CoinService.addMatchIncome(awayTeam._id, 'youthCamp');\n  }\n\n  // ÿ™ŸàŸÑ€åÿØ ÿ™Ÿàÿ∂€åÿ≠ ÿ±Ÿà€åÿØÿßÿØ\n  static generateEventDescription(type, team, minute) {\n    const descriptions = {\n      goal: `‚öΩ ⁄ØŸÑ ÿ≤€åÿ®ÿß ÿØÿ± ÿØŸÇ€åŸÇŸá ${minute}!`,\n      yellowCard: `üü® ⁄©ÿßÿ±ÿ™ ÿ≤ÿ±ÿØ ÿØÿ± ÿØŸÇ€åŸÇŸá ${minute}`,\n      redCard: `üü• ⁄©ÿßÿ±ÿ™ ŸÇÿ±ŸÖÿ≤ ÿØÿ± ÿØŸÇ€åŸÇŸá ${minute}!`,\n      injury: `ü§ï ŸÖÿµÿØŸàŸÖ€åÿ™ ÿØÿ± ÿØŸÇ€åŸÇŸá ${minute}`,\n      foul: `üì¢ ÿÆÿ∑ÿß ÿØÿ± ÿØŸÇ€åŸÇŸá ${minute}`,\n      corner: `‚Ü©Ô∏è ⁄©ÿ±ŸÜÿ± ÿØÿ± ÿØŸÇ€åŸÇŸá ${minute}`,\n      freeKick: `üéØ ÿ∂ÿ±ÿ®Ÿá ÿ¢ÿ≤ÿßÿØ ÿØÿ± ÿØŸÇ€åŸÇŸá ${minute}`,\n      penalty: `üéØ ŸæŸÜÿßŸÑÿ™€å ÿØÿ± ÿØŸÇ€åŸÇŸá ${minute}!`\n    };\n\n    return descriptions[type] || `ÿ±Ÿà€åÿØÿßÿØ ÿØÿ± ÿØŸÇ€åŸÇŸá ${minute}`;\n  }\n\n  // ÿØÿ±€åÿßŸÅÿ™ ŸÜÿßŸÖ ÿ™ÿµÿßÿØŸÅ€å ÿ®ÿßÿ≤€å⁄©ŸÜ\n  static getRandomPlayerName(team) {\n    if (!team.players || team.players.length === 0) return 'ÿ®ÿßÿ≤€å⁄©ŸÜ ŸÜÿßÿ¥ŸÜÿßÿ≥';\n    const player = team.players[Math.floor(Math.random() * team.players.length)];\n    return player.name;\n  }\n\n  // ÿßÿ±ÿ≥ÿßŸÑ ÿ¢ŸæÿØ€åÿ™ ÿßÿ≤ ÿ∑ÿ±€åŸÇ Socket\n  static emitMatchUpdate(match) {\n    const io = global.io;\n    if (io) {\n      io.emit('matchUpdate', {\n        matchId: match._id,\n        score: match.score,\n        events: match.events,\n        matchTime: match.matchTime\n      });\n    }\n  }\n\n  static delay(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  // ÿØÿ±€åÿßŸÅÿ™ ÿ®ÿßÿ≤€å‚ÄåŸáÿß€å ÿ≤ŸÜÿØŸá\n  static async getLiveMatches() {\n    return await Match.find({ \n      isFinished: false \n    })\n    .sort({ createdAt: -1 })\n    .limit(2) // ŸÅŸÇÿ∑ 2 ÿ®ÿßÿ≤€å ÿ¢ÿÆÿ±\n    .populate('homeTeam', 'teamName')\n    .populate('awayTeam', 'teamName');\n  }\n}\n\nmodule.exports = { MatchService };"],"mappings":"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","ignoreList":[]}},"mtime":1763908923895},"{\"assumptions\":{},\"sourceRoot\":\"/Users/trzp/Desktop/FootBallWeb/server/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/trzp/Desktop/FootBallWeb/server\",\"filename\":\"/Users/trzp/Desktop/FootBallWeb/server/models/Match.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/trzp/Desktop/FootBallWeb/server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.28.5:development":{"value":{"code":"import mongoose from 'mongoose';\nconst matchEventSchema = new mongoose.Schema({\n  minute: {\n    type: Number,\n    required: true\n  },\n  type: {\n    type: String,\n    enum: ['goal', 'yellowCard', 'redCard', 'injury', 'penalty', 'substitution', 'foul', 'corner', 'freeKick'],\n    required: true\n  },\n  team: {\n    type: String,\n    enum: ['home', 'away'],\n    required: true\n  },\n  playerId: {\n    type: mongoose.Schema.Types.ObjectId\n  },\n  playerName: {\n    type: String\n  },\n  description: {\n    type: String,\n    required: true\n  }\n});\nconst matchSchema = new mongoose.Schema({\n  homeTeam: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: 'User',\n    required: true\n  },\n  awayTeam: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: 'User',\n    required: true\n  },\n  homeTeamName: {\n    type: String,\n    required: true\n  },\n  awayTeamName: {\n    type: String,\n    required: true\n  },\n  stadium: {\n    type: String,\n    required: true\n  },\n  league: {\n    type: String,\n    required: true\n  },\n  score: {\n    home: {\n      type: Number,\n      default: 0\n    },\n    away: {\n      type: Number,\n      default: 0\n    }\n  },\n  events: [matchEventSchema],\n  isFinished: {\n    type: Boolean,\n    default: false\n  },\n  matchTime: {\n    type: Number,\n    default: 0\n  },\n  // ÿØŸÇ€åŸÇŸá ŸÅÿπŸÑ€å ÿ®ÿßÿ≤€å\n  startTime: {\n    type: Date,\n    default: Date.now\n  }\n}, {\n  timestamps: true\n});\n\n// TTL ÿß€åŸÜÿØ⁄©ÿ≥ ÿ®ÿ±ÿß€å Ÿæÿß⁄© ÿ¥ÿØŸÜ ÿÆŸàÿØ⁄©ÿßÿ± ÿ®ÿßÿ≤€å‚ÄåŸáÿß€å ŸÇÿØ€åŸÖ€å\nmatchSchema.index({\n  createdAt: 1\n}, {\n  expireAfterSeconds: 24 * 60 * 60\n}); // 24 ÿ≥ÿßÿπÿ™\n\n// ÿß€åŸÜÿØ⁄©ÿ≥ ÿ®ÿ±ÿß€å ÿ®ÿßÿ≤€å‚ÄåŸáÿß€å ÿ≤ŸÜÿØŸá\nmatchSchema.index({\n  isFinished: 1,\n  createdAt: -1\n});\nexport const Match = mongoose.model('Match', matchSchema);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsIm1hdGNoRXZlbnRTY2hlbWEiLCJTY2hlbWEiLCJtaW51dGUiLCJ0eXBlIiwiTnVtYmVyIiwicmVxdWlyZWQiLCJTdHJpbmciLCJlbnVtIiwidGVhbSIsInBsYXllcklkIiwiVHlwZXMiLCJPYmplY3RJZCIsInBsYXllck5hbWUiLCJkZXNjcmlwdGlvbiIsIm1hdGNoU2NoZW1hIiwiaG9tZVRlYW0iLCJyZWYiLCJhd2F5VGVhbSIsImhvbWVUZWFtTmFtZSIsImF3YXlUZWFtTmFtZSIsInN0YWRpdW0iLCJsZWFndWUiLCJzY29yZSIsImhvbWUiLCJkZWZhdWx0IiwiYXdheSIsImV2ZW50cyIsImlzRmluaXNoZWQiLCJCb29sZWFuIiwibWF0Y2hUaW1lIiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsInRpbWVzdGFtcHMiLCJpbmRleCIsImNyZWF0ZWRBdCIsImV4cGlyZUFmdGVyU2Vjb25kcyIsIk1hdGNoIiwibW9kZWwiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy90cnpwL0Rlc2t0b3AvRm9vdEJhbGxXZWIvc2VydmVyL21vZGVscy8iLCJzb3VyY2VzIjpbIk1hdGNoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5cbmNvbnN0IG1hdGNoRXZlbnRTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgbWludXRlOiB7IHR5cGU6IE51bWJlciwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgdHlwZTogeyBcbiAgICB0eXBlOiBTdHJpbmcsIFxuICAgIGVudW06IFsnZ29hbCcsICd5ZWxsb3dDYXJkJywgJ3JlZENhcmQnLCAnaW5qdXJ5JywgJ3BlbmFsdHknLCAnc3Vic3RpdHV0aW9uJywgJ2ZvdWwnLCAnY29ybmVyJywgJ2ZyZWVLaWNrJ10sXG4gICAgcmVxdWlyZWQ6IHRydWUgXG4gIH0sXG4gIHRlYW06IHsgdHlwZTogU3RyaW5nLCBlbnVtOiBbJ2hvbWUnLCAnYXdheSddLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBwbGF5ZXJJZDogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQgfSxcbiAgcGxheWVyTmFtZTogeyB0eXBlOiBTdHJpbmcgfSxcbiAgZGVzY3JpcHRpb246IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9XG59KTtcblxuY29uc3QgbWF0Y2hTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgaG9tZVRlYW06IHsgXG4gICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCBcbiAgICByZWY6ICdVc2VyJywgXG4gICAgcmVxdWlyZWQ6IHRydWUgXG4gIH0sXG4gIGF3YXlUZWFtOiB7IFxuICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgXG4gICAgcmVmOiAnVXNlcicsIFxuICAgIHJlcXVpcmVkOiB0cnVlIFxuICB9LFxuICBob21lVGVhbU5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBhd2F5VGVhbU5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBzdGFkaXVtOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgbGVhZ3VlOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgXG4gIHNjb3JlOiB7XG4gICAgaG9tZTogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcbiAgICBhd2F5OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9XG4gIH0sXG4gIFxuICBldmVudHM6IFttYXRjaEV2ZW50U2NoZW1hXSxcbiAgaXNGaW5pc2hlZDogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LFxuICBtYXRjaFRpbWU6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sIC8vINiv2YLbjNmC2Ycg2YHYudmE24wg2KjYp9iy24xcbiAgc3RhcnRUaW1lOiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IERhdGUubm93IH1cbn0sIHtcbiAgdGltZXN0YW1wczogdHJ1ZVxufSk7XG5cbi8vIFRUTCDYp9uM2YbYr9qp2LMg2KjYsdin24wg2b7Yp9qpINi02K/ZhiDYrtmI2K/aqdin2LEg2KjYp9iy24zigIzZh9in24wg2YLYr9uM2YXbjFxubWF0Y2hTY2hlbWEuaW5kZXgoeyBjcmVhdGVkQXQ6IDEgfSwgeyBleHBpcmVBZnRlclNlY29uZHM6IDI0ICogNjAgKiA2MCB9KTsgLy8gMjQg2LPYp9i52KpcblxuLy8g2KfbjNmG2K/aqdizINio2LHYp9uMINio2KfYstuM4oCM2YfYp9uMINiy2YbYr9mHXG5tYXRjaFNjaGVtYS5pbmRleCh7IGlzRmluaXNoZWQ6IDEsIGNyZWF0ZWRBdDogLTEgfSk7XG5cbmV4cG9ydCBjb25zdCBNYXRjaCA9IG1vbmdvb3NlLm1vZGVsKCdNYXRjaCcsIG1hdGNoU2NoZW1hKTsiXSwibWFwcGluZ3MiOiJBQUFBLE9BQU9BLFFBQVEsTUFBTSxVQUFVO0FBRS9CLE1BQU1DLGdCQUFnQixHQUFHLElBQUlELFFBQVEsQ0FBQ0UsTUFBTSxDQUFDO0VBQzNDQyxNQUFNLEVBQUU7SUFBRUMsSUFBSSxFQUFFQyxNQUFNO0lBQUVDLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDeENGLElBQUksRUFBRTtJQUNKQSxJQUFJLEVBQUVHLE1BQU07SUFDWkMsSUFBSSxFQUFFLENBQUMsTUFBTSxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxjQUFjLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxVQUFVLENBQUM7SUFDMUdGLFFBQVEsRUFBRTtFQUNaLENBQUM7RUFDREcsSUFBSSxFQUFFO0lBQUVMLElBQUksRUFBRUcsTUFBTTtJQUFFQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQUVGLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDOURJLFFBQVEsRUFBRTtJQUFFTixJQUFJLEVBQUVKLFFBQVEsQ0FBQ0UsTUFBTSxDQUFDUyxLQUFLLENBQUNDO0VBQVMsQ0FBQztFQUNsREMsVUFBVSxFQUFFO0lBQUVULElBQUksRUFBRUc7RUFBTyxDQUFDO0VBQzVCTyxXQUFXLEVBQUU7SUFBRVYsSUFBSSxFQUFFRyxNQUFNO0lBQUVELFFBQVEsRUFBRTtFQUFLO0FBQzlDLENBQUMsQ0FBQztBQUVGLE1BQU1TLFdBQVcsR0FBRyxJQUFJZixRQUFRLENBQUNFLE1BQU0sQ0FBQztFQUN0Q2MsUUFBUSxFQUFFO0lBQ1JaLElBQUksRUFBRUosUUFBUSxDQUFDRSxNQUFNLENBQUNTLEtBQUssQ0FBQ0MsUUFBUTtJQUNwQ0ssR0FBRyxFQUFFLE1BQU07SUFDWFgsUUFBUSxFQUFFO0VBQ1osQ0FBQztFQUNEWSxRQUFRLEVBQUU7SUFDUmQsSUFBSSxFQUFFSixRQUFRLENBQUNFLE1BQU0sQ0FBQ1MsS0FBSyxDQUFDQyxRQUFRO0lBQ3BDSyxHQUFHLEVBQUUsTUFBTTtJQUNYWCxRQUFRLEVBQUU7RUFDWixDQUFDO0VBQ0RhLFlBQVksRUFBRTtJQUFFZixJQUFJLEVBQUVHLE1BQU07SUFBRUQsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUM5Q2MsWUFBWSxFQUFFO0lBQUVoQixJQUFJLEVBQUVHLE1BQU07SUFBRUQsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUM5Q2UsT0FBTyxFQUFFO0lBQUVqQixJQUFJLEVBQUVHLE1BQU07SUFBRUQsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUN6Q2dCLE1BQU0sRUFBRTtJQUFFbEIsSUFBSSxFQUFFRyxNQUFNO0lBQUVELFFBQVEsRUFBRTtFQUFLLENBQUM7RUFFeENpQixLQUFLLEVBQUU7SUFDTEMsSUFBSSxFQUFFO01BQUVwQixJQUFJLEVBQUVDLE1BQU07TUFBRW9CLE9BQU8sRUFBRTtJQUFFLENBQUM7SUFDbENDLElBQUksRUFBRTtNQUFFdEIsSUFBSSxFQUFFQyxNQUFNO01BQUVvQixPQUFPLEVBQUU7SUFBRTtFQUNuQyxDQUFDO0VBRURFLE1BQU0sRUFBRSxDQUFDMUIsZ0JBQWdCLENBQUM7RUFDMUIyQixVQUFVLEVBQUU7SUFBRXhCLElBQUksRUFBRXlCLE9BQU87SUFBRUosT0FBTyxFQUFFO0VBQU0sQ0FBQztFQUM3Q0ssU0FBUyxFQUFFO0lBQUUxQixJQUFJLEVBQUVDLE1BQU07SUFBRW9CLE9BQU8sRUFBRTtFQUFFLENBQUM7RUFBRTtFQUN6Q00sU0FBUyxFQUFFO0lBQUUzQixJQUFJLEVBQUU0QixJQUFJO0lBQUVQLE9BQU8sRUFBRU8sSUFBSSxDQUFDQztFQUFJO0FBQzdDLENBQUMsRUFBRTtFQUNEQyxVQUFVLEVBQUU7QUFDZCxDQUFDLENBQUM7O0FBRUY7QUFDQW5CLFdBQVcsQ0FBQ29CLEtBQUssQ0FBQztFQUFFQyxTQUFTLEVBQUU7QUFBRSxDQUFDLEVBQUU7RUFBRUMsa0JBQWtCLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRztBQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7O0FBRTNFO0FBQ0F0QixXQUFXLENBQUNvQixLQUFLLENBQUM7RUFBRVAsVUFBVSxFQUFFLENBQUM7RUFBRVEsU0FBUyxFQUFFLENBQUM7QUFBRSxDQUFDLENBQUM7QUFFbkQsT0FBTyxNQUFNRSxLQUFLLEdBQUd0QyxRQUFRLENBQUN1QyxLQUFLLENBQUMsT0FBTyxFQUFFeEIsV0FBVyxDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["mongoose","matchEventSchema","Schema","minute","type","Number","required","String","enum","team","playerId","Types","ObjectId","playerName","description","matchSchema","homeTeam","ref","awayTeam","homeTeamName","awayTeamName","stadium","league","score","home","default","away","events","isFinished","Boolean","matchTime","startTime","Date","now","timestamps","index","createdAt","expireAfterSeconds","Match","model"],"sourceRoot":"/Users/trzp/Desktop/FootBallWeb/server/models/","sources":["Match.js"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst matchEventSchema = new mongoose.Schema({\n  minute: { type: Number, required: true },\n  type: { \n    type: String, \n    enum: ['goal', 'yellowCard', 'redCard', 'injury', 'penalty', 'substitution', 'foul', 'corner', 'freeKick'],\n    required: true \n  },\n  team: { type: String, enum: ['home', 'away'], required: true },\n  playerId: { type: mongoose.Schema.Types.ObjectId },\n  playerName: { type: String },\n  description: { type: String, required: true }\n});\n\nconst matchSchema = new mongoose.Schema({\n  homeTeam: { \n    type: mongoose.Schema.Types.ObjectId, \n    ref: 'User', \n    required: true \n  },\n  awayTeam: { \n    type: mongoose.Schema.Types.ObjectId, \n    ref: 'User', \n    required: true \n  },\n  homeTeamName: { type: String, required: true },\n  awayTeamName: { type: String, required: true },\n  stadium: { type: String, required: true },\n  league: { type: String, required: true },\n  \n  score: {\n    home: { type: Number, default: 0 },\n    away: { type: Number, default: 0 }\n  },\n  \n  events: [matchEventSchema],\n  isFinished: { type: Boolean, default: false },\n  matchTime: { type: Number, default: 0 }, // ÿØŸÇ€åŸÇŸá ŸÅÿπŸÑ€å ÿ®ÿßÿ≤€å\n  startTime: { type: Date, default: Date.now }\n}, {\n  timestamps: true\n});\n\n// TTL ÿß€åŸÜÿØ⁄©ÿ≥ ÿ®ÿ±ÿß€å Ÿæÿß⁄© ÿ¥ÿØŸÜ ÿÆŸàÿØ⁄©ÿßÿ± ÿ®ÿßÿ≤€å‚ÄåŸáÿß€å ŸÇÿØ€åŸÖ€å\nmatchSchema.index({ createdAt: 1 }, { expireAfterSeconds: 24 * 60 * 60 }); // 24 ÿ≥ÿßÿπÿ™\n\n// ÿß€åŸÜÿØ⁄©ÿ≥ ÿ®ÿ±ÿß€å ÿ®ÿßÿ≤€å‚ÄåŸáÿß€å ÿ≤ŸÜÿØŸá\nmatchSchema.index({ isFinished: 1, createdAt: -1 });\n\nexport const Match = mongoose.model('Match', matchSchema);"],"mappings":"AAAA,OAAOA,QAAQ,MAAM,UAAU;AAE/B,MAAMC,gBAAgB,GAAG,IAAID,QAAQ,CAACE,MAAM,CAAC;EAC3CC,MAAM,EAAE;IAAEC,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EACxCF,IAAI,EAAE;IACJA,IAAI,EAAEG,MAAM;IACZC,IAAI,EAAE,CAAC,MAAM,EAAE,YAAY,EAAE,SAAS,EAAE,QAAQ,EAAE,SAAS,EAAE,cAAc,EAAE,MAAM,EAAE,QAAQ,EAAE,UAAU,CAAC;IAC1GF,QAAQ,EAAE;EACZ,CAAC;EACDG,IAAI,EAAE;IAAEL,IAAI,EAAEG,MAAM;IAAEC,IAAI,EAAE,CAAC,MAAM,EAAE,MAAM,CAAC;IAAEF,QAAQ,EAAE;EAAK,CAAC;EAC9DI,QAAQ,EAAE;IAAEN,IAAI,EAAEJ,QAAQ,CAACE,MAAM,CAACS,KAAK,CAACC;EAAS,CAAC;EAClDC,UAAU,EAAE;IAAET,IAAI,EAAEG;EAAO,CAAC;EAC5BO,WAAW,EAAE;IAAEV,IAAI,EAAEG,MAAM;IAAED,QAAQ,EAAE;EAAK;AAC9C,CAAC,CAAC;AAEF,MAAMS,WAAW,GAAG,IAAIf,QAAQ,CAACE,MAAM,CAAC;EACtCc,QAAQ,EAAE;IACRZ,IAAI,EAAEJ,QAAQ,CAACE,MAAM,CAACS,KAAK,CAACC,QAAQ;IACpCK,GAAG,EAAE,MAAM;IACXX,QAAQ,EAAE;EACZ,CAAC;EACDY,QAAQ,EAAE;IACRd,IAAI,EAAEJ,QAAQ,CAACE,MAAM,CAACS,KAAK,CAACC,QAAQ;IACpCK,GAAG,EAAE,MAAM;IACXX,QAAQ,EAAE;EACZ,CAAC;EACDa,YAAY,EAAE;IAAEf,IAAI,EAAEG,MAAM;IAAED,QAAQ,EAAE;EAAK,CAAC;EAC9Cc,YAAY,EAAE;IAAEhB,IAAI,EAAEG,MAAM;IAAED,QAAQ,EAAE;EAAK,CAAC;EAC9Ce,OAAO,EAAE;IAAEjB,IAAI,EAAEG,MAAM;IAAED,QAAQ,EAAE;EAAK,CAAC;EACzCgB,MAAM,EAAE;IAAElB,IAAI,EAAEG,MAAM;IAAED,QAAQ,EAAE;EAAK,CAAC;EAExCiB,KAAK,EAAE;IACLC,IAAI,EAAE;MAAEpB,IAAI,EAAEC,MAAM;MAAEoB,OAAO,EAAE;IAAE,CAAC;IAClCC,IAAI,EAAE;MAAEtB,IAAI,EAAEC,MAAM;MAAEoB,OAAO,EAAE;IAAE;EACnC,CAAC;EAEDE,MAAM,EAAE,CAAC1B,gBAAgB,CAAC;EAC1B2B,UAAU,EAAE;IAAExB,IAAI,EAAEyB,OAAO;IAAEJ,OAAO,EAAE;EAAM,CAAC;EAC7CK,SAAS,EAAE;IAAE1B,IAAI,EAAEC,MAAM;IAAEoB,OAAO,EAAE;EAAE,CAAC;EAAE;EACzCM,SAAS,EAAE;IAAE3B,IAAI,EAAE4B,IAAI;IAAEP,OAAO,EAAEO,IAAI,CAACC;EAAI;AAC7C,CAAC,EAAE;EACDC,UAAU,EAAE;AACd,CAAC,CAAC;;AAEF;AACAnB,WAAW,CAACoB,KAAK,CAAC;EAAEC,SAAS,EAAE;AAAE,CAAC,EAAE;EAAEC,kBAAkB,EAAE,EAAE,GAAG,EAAE,GAAG;AAAG,CAAC,CAAC,CAAC,CAAC;;AAE3E;AACAtB,WAAW,CAACoB,KAAK,CAAC;EAAEP,UAAU,EAAE,CAAC;EAAEQ,SAAS,EAAE,CAAC;AAAE,CAAC,CAAC;AAEnD,OAAO,MAAME,KAAK,GAAGtC,QAAQ,CAACuC,KAAK,CAAC,OAAO,EAAExB,WAAW,CAAC","ignoreList":[]}},"mtime":1761459581151}}